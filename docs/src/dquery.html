<!DOCTYPE html>

<html>
<head>
  <title>dquery.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="delegate.html">
                  src/delegate.js
                </a>
              
                
                <a class="source" href="dquery.html">
                  src/dquery.js
                </a>
              
                
                <a class="source" href="index.html">
                  src/index.js
                </a>
              
                
                <a class="source" href="templates.html">
                  src/templates.js
                </a>
              
                
                <a class="source" href="vdom.html">
                  src/vdom.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>dquery.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><pre class="shiki" style="background-color: transparent"><code style="--line-start-number: 1;"><span class="line" id="L1"><span style="color: #D32F2F">class</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L2"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L3"><span style="color: #C2C3C5">   * DQueryNode wraps DOM Element objects with enhanced functionality.</span></span>
<span class="line" id="L4"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L5"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{Element}</span><span style="color: #C2C3C5"> node A DOM Element object, which represents an HTML tag.</span></span>
<span class="line" id="L6"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L7"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">constructor</span><span style="color: #24292EFF">(node) {</span></span>
<span class="line" id="L8"><span style="color: #24292EFF">    </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> node;</span></span>
<span class="line" id="L9"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L10"></span>
<span class="line" id="L11"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L12"><span style="color: #C2C3C5">   * Gets the underlying native DOM Element object.</span></span>
<span class="line" id="L13"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L14"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> Element</span></span>
<span class="line" id="L15"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L16"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">get</span><span style="color: #24292EFF">() {</span></span>
<span class="line" id="L17"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line" id="L18"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L19"></span>
<span class="line" id="L20"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L21"><span style="color: #C2C3C5">   * Gets the nearest ancestor which matches a selector. If no selector is</span></span>
<span class="line" id="L22"><span style="color: #C2C3C5">   * given, returns parent.</span></span>
<span class="line" id="L23"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L24"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L25"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L26"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L27"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">ancestor</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L28"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line empty-line" id="L29"></span>
<span class="line" id="L30"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L31"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.parent</span><span style="color: #24292EFF">();</span></span>
<span class="line" id="L32"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L33"></span>
<span class="line" id="L34"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.closest</span><span style="color: #24292EFF">(selector));</span></span>
<span class="line" id="L35"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L36"></span>
<span class="line" id="L37"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L38"><span style="color: #C2C3C5">   * Gets the immediate parent element.</span></span>
<span class="line" id="L39"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L40"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L41"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L42"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">parent</span><span style="color: #24292EFF">() {</span></span>
<span class="line" id="L43"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">!</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.parentNode) {</span></span>
<span class="line" id="L44"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">null</span><span style="color: #24292EFF">;</span></span>
<span class="line" id="L45"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L46"></span>
<span class="line" id="L47"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.parentNode);</span></span>
<span class="line" id="L48"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L49"></span>
<span class="line" id="L50"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L51"><span style="color: #C2C3C5">   * Gets all descendants which match a selector. If no selector is given,</span></span>
<span class="line" id="L52"><span style="color: #C2C3C5">   * returns children.</span></span>
<span class="line" id="L53"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L54"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L55"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQuery</span></span>
<span class="line" id="L56"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L57"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">descendants</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L58"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line empty-line" id="L59"></span>
<span class="line" id="L60"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L61"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.children</span><span style="color: #24292EFF">();</span></span>
<span class="line" id="L62"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L63"></span>
<span class="line" id="L64"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQuery</span><span style="color: #24292EFF">(selector</span><span style="color: #212121">,</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node); </span><span style="color: #C2C3C5">// eslint-disable-line no-undef</span></span>
<span class="line" id="L65"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L66"></span>
<span class="line" id="L67"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L68"><span style="color: #C2C3C5">   * Gets all immediate children which match a selector.</span></span>
<span class="line" id="L69"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L70"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L71"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> []DQueryNode</span></span>
<span class="line" id="L72"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L73"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">children</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L74"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line empty-line" id="L75"></span>
<span class="line" id="L76"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">Array</span><span style="color: #6F42C1">.from</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.childNodes).</span></span>
<span class="line" id="L77"><span style="color: #24292EFF">      </span><span style="color: #6F42C1">filter</span><span style="color: #24292EFF">(e </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">e</span><span style="color: #24292EFF">.nodeType </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">Node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">ELEMENT_NODE</span><span style="color: #24292EFF">).</span></span>
<span class="line" id="L78"><span style="color: #24292EFF">      </span><span style="color: #6F42C1">filter</span><span style="color: #24292EFF">(e </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> (selector </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">e</span><span style="color: #6F42C1">.matches</span><span style="color: #24292EFF">(selector)) </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">).</span></span>
<span class="line" id="L79"><span style="color: #24292EFF">      </span><span style="color: #6F42C1">map</span><span style="color: #24292EFF">(e </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(e));</span></span>
<span class="line" id="L80"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L81"></span>
<span class="line" id="L82"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L83"><span style="color: #C2C3C5">   * Gets all sibling elements of the immediate parent which match a selector.</span></span>
<span class="line" id="L84"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L85"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L86"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> []DQueryNode</span></span>
<span class="line" id="L87"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L88"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">siblings</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L89"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line empty-line" id="L90"></span>
<span class="line" id="L91"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">!</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.parentNode) {</span></span>
<span class="line" id="L92"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> [];</span></span>
<span class="line" id="L93"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L94"></span>
<span class="line" id="L95"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">let</span><span style="color: #24292EFF"> sibling </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">parentNode</span><span style="color: #24292EFF">.firstChild;</span></span>
<span class="line" id="L96"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">siblings</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> [];</span></span>
<span class="line empty-line" id="L97"></span>
<span class="line" id="L98"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">while</span><span style="color: #24292EFF"> (sibling) {</span></span>
<span class="line" id="L99"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (sibling </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node) {</span></span>
<span class="line" id="L100"><span style="color: #24292EFF">        </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span></span>
<span class="line" id="L101"><span style="color: #24292EFF">          </span><span style="color: #1976D2">sibling</span><span style="color: #24292EFF">.nodeType </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">Node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">ELEMENT_NODE</span></span>
<span class="line" id="L102"><span style="color: #24292EFF">          </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> ((selector </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">sibling</span><span style="color: #6F42C1">.matches</span><span style="color: #24292EFF">(selector)) </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">)</span></span>
<span class="line" id="L103"><span style="color: #24292EFF">        ) {</span></span>
<span class="line" id="L104"><span style="color: #24292EFF">          </span><span style="color: #1976D2">siblings</span><span style="color: #6F42C1">.push</span><span style="color: #24292EFF">(</span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(sibling));</span></span>
<span class="line" id="L105"><span style="color: #24292EFF">        }</span></span>
<span class="line" id="L106"><span style="color: #24292EFF">      }</span></span>
<span class="line empty-line" id="L107"></span>
<span class="line" id="L108"><span style="color: #24292EFF">      sibling </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">sibling</span><span style="color: #24292EFF">.nextSibling;</span></span>
<span class="line" id="L109"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L110"></span>
<span class="line" id="L111"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> siblings;</span></span>
<span class="line" id="L112"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L113"></span>
<span class="line" id="L114"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L115"><span style="color: #C2C3C5">   * Gets the immediately-next sibling which matches a selector.</span></span>
<span class="line" id="L116"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L117"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L118"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L119"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L120"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">next</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L121"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line" id="L122"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">let</span><span style="color: #24292EFF"> next </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.nextSibling;</span></span>
<span class="line empty-line" id="L123"></span>
<span class="line" id="L124"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">while</span><span style="color: #24292EFF"> (next) {</span></span>
<span class="line" id="L125"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #1976D2">next</span><span style="color: #24292EFF">.nodeType </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">Node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">ELEMENT_NODE</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> ((selector </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">next</span><span style="color: #6F42C1">.matches</span><span style="color: #24292EFF">(selector)) </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">)) {</span></span>
<span class="line" id="L126"><span style="color: #24292EFF">        </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(next);</span></span>
<span class="line" id="L127"><span style="color: #24292EFF">      }</span></span>
<span class="line empty-line" id="L128"></span>
<span class="line" id="L129"><span style="color: #24292EFF">      next </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">next</span><span style="color: #24292EFF">.nextSibling;</span></span>
<span class="line" id="L130"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L131"></span>
<span class="line" id="L132"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">null</span><span style="color: #24292EFF">;</span></span>
<span class="line" id="L133"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L134"></span>
<span class="line" id="L135"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L136"><span style="color: #C2C3C5">   * Gets the immediately-previous sibling which matches a selector.</span></span>
<span class="line" id="L137"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L138"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> selector (Optional) CSS selector to match, if any.</span></span>
<span class="line" id="L139"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L140"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L141"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">prev</span><span style="color: #24292EFF">(selector) {</span></span>
<span class="line" id="L142"><span style="color: #24292EFF">    selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">;</span></span>
<span class="line" id="L143"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">let</span><span style="color: #24292EFF"> prev </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.previousSibling;</span></span>
<span class="line empty-line" id="L144"></span>
<span class="line" id="L145"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">while</span><span style="color: #24292EFF"> (prev) {</span></span>
<span class="line" id="L146"><span style="color: #24292EFF">      </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #1976D2">prev</span><span style="color: #24292EFF">.nodeType </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">Node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">ELEMENT_NODE</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> ((selector </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;&amp;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">prev</span><span style="color: #6F42C1">.matches</span><span style="color: #24292EFF">(selector)) </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> selector </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;&#39;</span><span style="color: #24292EFF">)) {</span></span>
<span class="line" id="L147"><span style="color: #24292EFF">        </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(prev);</span></span>
<span class="line" id="L148"><span style="color: #24292EFF">      }</span></span>
<span class="line empty-line" id="L149"></span>
<span class="line" id="L150"><span style="color: #24292EFF">      prev </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">prev</span><span style="color: #24292EFF">.previousSibling;</span></span>
<span class="line" id="L151"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L152"></span>
<span class="line" id="L153"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">null</span><span style="color: #24292EFF">;</span></span>
<span class="line" id="L154"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L155"></span>
<span class="line" id="L156"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L157"><span style="color: #C2C3C5">   * Prepends the provided element to the selected node, then returns a pointer</span></span>
<span class="line" id="L158"><span style="color: #C2C3C5">   * to the prepended node in the DOM.</span></span>
<span class="line" id="L159"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L160"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{Element}</span><span style="color: #C2C3C5"> element (Required) The DOM element to prepend.</span></span>
<span class="line" id="L161"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L162"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L163"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">prepend</span><span style="color: #24292EFF">(element) {</span></span>
<span class="line" id="L164"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #24292EFF">.dom </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;undefined&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L165"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.insertAdjacentElement</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39;afterbegin&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #6F42C1">.dom</span><span style="color: #24292EFF">());</span></span>
<span class="line" id="L166"><span style="color: #24292EFF">    } </span><span style="color: #D32F2F">else</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L167"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.insertAdjacentElement</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39;afterbegin&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> element);</span></span>
<span class="line" id="L168"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L169"></span>
<span class="line" id="L170"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.childNodes[</span><span style="color: #1976D2">0</span><span style="color: #24292EFF">]);</span></span>
<span class="line" id="L171"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L172"></span>
<span class="line" id="L173"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L174"><span style="color: #C2C3C5">   * Appends the provided element to the selected node, then returns a pointer</span></span>
<span class="line" id="L175"><span style="color: #C2C3C5">   * to the appended node in the DOM.</span></span>
<span class="line" id="L176"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L177"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{Element}</span><span style="color: #C2C3C5"> element (Required) The DOM element to append.</span></span>
<span class="line" id="L178"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L179"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L180"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">append</span><span style="color: #24292EFF">(element) {</span></span>
<span class="line" id="L181"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> ((</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> element)</span><span style="color: #6F42C1">.toLowerCase</span><span style="color: #24292EFF">() </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;string&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L182"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.insertAdjacentHTML</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39;beforeend&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> element);</span></span>
<span class="line" id="L183"><span style="color: #24292EFF">    } </span><span style="color: #D32F2F">else</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #24292EFF">.dom </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;undefined&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L184"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.insertAdjacentElement</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39;beforeend&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #6F42C1">.dom</span><span style="color: #24292EFF">());</span></span>
<span class="line" id="L185"><span style="color: #24292EFF">    } </span><span style="color: #D32F2F">else</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L186"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.insertAdjacentElement</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39;beforeend&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> element);</span></span>
<span class="line" id="L187"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L188"></span>
<span class="line" id="L189"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.childNodes[</span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">childNodes</span><span style="color: #24292EFF">.</span><span style="color: #1976D2">length</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">-</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">1</span><span style="color: #24292EFF">]);</span></span>
<span class="line" id="L190"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L191"></span>
<span class="line" id="L192"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L193"><span style="color: #C2C3C5">   * Inserts the provided element before the selected node, then returns a</span></span>
<span class="line" id="L194"><span style="color: #C2C3C5">   * pointer to the added node in the DOM.</span></span>
<span class="line" id="L195"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L196"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{Element}</span><span style="color: #C2C3C5"> element (Required) The DOM element to insert before.</span></span>
<span class="line" id="L197"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L198"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L199"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">before</span><span style="color: #24292EFF">(element) {</span></span>
<span class="line" id="L200"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #24292EFF">.dom </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;undefined&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L201"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.before</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">element</span><span style="color: #6F42C1">.dom</span><span style="color: #24292EFF">());</span></span>
<span class="line" id="L202"><span style="color: #24292EFF">    } </span><span style="color: #D32F2F">else</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L203"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.before</span><span style="color: #24292EFF">(element);</span></span>
<span class="line" id="L204"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L205"></span>
<span class="line" id="L206"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.prev</span><span style="color: #24292EFF">();</span></span>
<span class="line" id="L207"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L208"></span>
<span class="line" id="L209"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L210"><span style="color: #C2C3C5">   * Inserts the provided element after the selected node, then returns a</span></span>
<span class="line" id="L211"><span style="color: #C2C3C5">   * pointer to the added node in the DOM.</span></span>
<span class="line" id="L212"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L213"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{Element}</span><span style="color: #C2C3C5"> element (Required) The DOM element to insert after.</span></span>
<span class="line" id="L214"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DQueryNode</span></span>
<span class="line" id="L215"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L216"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">after</span><span style="color: #24292EFF">(element) {</span></span>
<span class="line" id="L217"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">element</span><span style="color: #24292EFF">.dom </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;undefined&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L218"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.after</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">element</span><span style="color: #6F42C1">.dom</span><span style="color: #24292EFF">());</span></span>
<span class="line" id="L219"><span style="color: #24292EFF">    } </span><span style="color: #D32F2F">else</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L220"><span style="color: #24292EFF">      </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.after</span><span style="color: #24292EFF">(element);</span></span>
<span class="line" id="L221"><span style="color: #24292EFF">    }</span></span>
<span class="line empty-line" id="L222"></span>
<span class="line" id="L223"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.next</span><span style="color: #24292EFF">();</span></span>
<span class="line" id="L224"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L225"></span>
<span class="line" id="L226"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L227"><span style="color: #C2C3C5">   * Returns the list of classnames currently applied to the element.</span></span>
<span class="line" id="L228"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L229"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> DOMTokenList</span></span>
<span class="line" id="L230"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L231"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">classes</span><span style="color: #24292EFF">() {</span></span>
<span class="line" id="L232"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L233"></span>
<span class="line" id="L234"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF">.classList;</span></span>
<span class="line" id="L235"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L236"></span>
<span class="line" id="L237"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L238"><span style="color: #C2C3C5">   * Determines whether or not the element has the specified classname applied.</span></span>
<span class="line" id="L239"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L240"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass (Required) The classname to check on the element.</span></span>
<span class="line" id="L241"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> bool</span></span>
<span class="line" id="L242"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L243"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">has</span><span style="color: #24292EFF">(klass) {</span></span>
<span class="line" id="L244"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L245"></span>
<span class="line" id="L246"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.contains</span><span style="color: #24292EFF">(klass);</span></span>
<span class="line" id="L247"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L248"></span>
<span class="line" id="L249"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L250"><span style="color: #C2C3C5">   * Adds the specified classname to the element.</span></span>
<span class="line" id="L251"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L252"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass (Required) The classname to add to the element.</span></span>
<span class="line" id="L253"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> bool</span></span>
<span class="line" id="L254"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L255"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">add</span><span style="color: #24292EFF">(klass) {</span></span>
<span class="line" id="L256"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L257"></span>
<span class="line" id="L258"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.add</span><span style="color: #24292EFF">(klass);</span></span>
<span class="line" id="L259"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L260"></span>
<span class="line" id="L261"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L262"><span style="color: #C2C3C5">   * Removes the specified classname to the element.</span></span>
<span class="line" id="L263"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L264"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass (Required) The classname to remove from the element.</span></span>
<span class="line" id="L265"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> bool</span></span>
<span class="line" id="L266"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L267"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">remove</span><span style="color: #24292EFF">(klass) {</span></span>
<span class="line" id="L268"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L269"></span>
<span class="line" id="L270"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.remove</span><span style="color: #24292EFF">(klass);</span></span>
<span class="line" id="L271"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L272"></span>
<span class="line" id="L273"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L274"><span style="color: #C2C3C5">   * Replaces the specified classname on the element with another classname.</span></span>
<span class="line" id="L275"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L276"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass1 (Required) The classname to remove from the element.</span></span>
<span class="line" id="L277"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass2 (Required) The classname to add to the element.</span></span>
<span class="line" id="L278"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> bool</span></span>
<span class="line" id="L279"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L280"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">replace</span><span style="color: #24292EFF">(klass1</span><span style="color: #212121">,</span><span style="color: #24292EFF"> klass2) {</span></span>
<span class="line" id="L281"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L282"></span>
<span class="line" id="L283"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.replace</span><span style="color: #24292EFF">(klass1</span><span style="color: #212121">,</span><span style="color: #24292EFF"> klass2);</span></span>
<span class="line" id="L284"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L285"></span>
<span class="line" id="L286"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L287"><span style="color: #C2C3C5">   * Toggles a classname on the element. Returns a boolean value, `true` or</span></span>
<span class="line" id="L288"><span style="color: #C2C3C5">   * `false`, indicating whether or not `klass` is in the list of classnames</span></span>
<span class="line" id="L289"><span style="color: #C2C3C5">   * after the call or not.</span></span>
<span class="line" id="L290"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L291"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> klass (Required) The classname to toggle on the element.</span></span>
<span class="line" id="L292"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> bool</span></span>
<span class="line" id="L293"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L294"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">toggle</span><span style="color: #24292EFF">(klass) {</span></span>
<span class="line" id="L295"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L296"></span>
<span class="line" id="L297"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.toggle</span><span style="color: #24292EFF">(klass);</span></span>
<span class="line" id="L298"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L299"></span>
<span class="line" id="L300"><span style="color: #24292EFF">  </span><span style="color: #C2C3C5">/**</span></span>
<span class="line" id="L301"><span style="color: #C2C3C5">   * A wrapper for addEventListener with `once: false`.</span></span>
<span class="line" id="L302"><span style="color: #C2C3C5">   *</span></span>
<span class="line" id="L303"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string}</span><span style="color: #C2C3C5"> type A valid event type, like `click`. See</span></span>
<span class="line" id="L304"><span style="color: #C2C3C5">   *     &lt;https://developer.mozilla.org/en-US/docs/Web/Events&gt; or more information.</span></span>
<span class="line" id="L305"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@param</span><span style="color: #C2C3C5"> </span><span style="color: #6F42C1">{string|function|Delegate}</span><span style="color: #C2C3C5"> fn A callback function to execute, or a string</span></span>
<span class="line" id="L306"><span style="color: #C2C3C5">   *     containing the name of the function.</span></span>
<span class="line" id="L307"><span style="color: #C2C3C5">   * </span><span style="color: #D32F2F">@returns</span><span style="color: #C2C3C5"> EventPointer</span></span>
<span class="line" id="L308"><span style="color: #C2C3C5">   */</span></span>
<span class="line" id="L309"><span style="color: #24292EFF">  </span><span style="color: #6F42C1">on</span><span style="color: #24292EFF">(type</span><span style="color: #212121">,</span><span style="color: #24292EFF"> fn) {</span></span>
<span class="line" id="L310"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">node</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">this</span><span style="color: #24292EFF">.node;</span></span>
<span class="line empty-line" id="L311"></span>
<span class="line" id="L312"><span style="color: #24292EFF">    </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.addEventListener</span><span style="color: #24292EFF">(type</span><span style="color: #212121">,</span><span style="color: #24292EFF"> fn</span><span style="color: #212121">,</span><span style="color: #24292EFF"> {once</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">false</span><span style="color: #24292EFF">});</span></span>
<span class="line empty-line" id="L313"></span>
<span class="line" id="L314"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L315"><span style="color: #24292EFF">      </span><span style="color: #6F42C1">remove</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">function</span><span style="color: #24292EFF">() {</span></span>
<span class="line" id="L316"><span style="color: #24292EFF">        </span><span style="color: #1976D2">node</span><span style="color: #6F42C1">.removeEventListener</span><span style="color: #24292EFF">(type</span><span style="color: #212121">,</span><span style="color: #24292EFF"> fn</span><span style="color: #212121">,</span><span style="color: #24292EFF"> {once</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">false</span><span style="color: #24292EFF">});</span></span>
<span class="line" id="L317"><span style="color: #24292EFF">      }</span><span style="color: #212121">,</span></span>
<span class="line" id="L318"><span style="color: #24292EFF">    };</span></span>
<span class="line" id="L319"><span style="color: #24292EFF">  }</span></span>
<span class="line" id="L320"><span style="color: #24292EFF">}</span></span>
<span class="line empty-line" id="L321"></span>
<span class="line" id="L322"><span style="color: #D32F2F">function</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQuery</span><span style="color: #24292EFF">(selector</span><span style="color: #212121">,</span><span style="color: #24292EFF"> elem) {</span></span>
<span class="line empty-line" id="L323"></span></code></pre></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p>eslint-disable-line no-undef</p>

            </div>
            
            <div class="content"><pre class="shiki" style="background-color: transparent"><code style="--line-start-number: 324;"><span class="line" id="L324"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (selector </span><span style="color: #D32F2F">instanceof</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">Element</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L325"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(selector);</span></span>
<span class="line" id="L326"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L327"></span>
<span class="line" id="L328"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">collection</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> [];</span></span>
<span class="line empty-line" id="L329"></span>
<span class="line" id="L330"><span style="color: #24292EFF">  elem </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> elem </span><span style="color: #D32F2F">||</span><span style="color: #24292EFF"> document;</span></span>
<span class="line" id="L331"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (elem </span><span style="color: #D32F2F">===</span><span style="color: #24292EFF"> document) {</span></span>
<span class="line" id="L332"><span style="color: #24292EFF">    </span><span style="color: #1976D2">document</span><span style="color: #6F42C1">.querySelectorAll</span><span style="color: #24292EFF">(selector)</span><span style="color: #6F42C1">.forEach</span><span style="color: #24292EFF">((ee) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L333"><span style="color: #24292EFF">      </span><span style="color: #1976D2">collection</span><span style="color: #6F42C1">.push</span><span style="color: #24292EFF">(</span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(ee));</span></span>
<span class="line" id="L334"><span style="color: #24292EFF">    });</span></span>
<span class="line empty-line" id="L335"></span>
<span class="line" id="L336"><span style="color: #24292EFF">    </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> collection;</span></span>
<span class="line" id="L337"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L338"></span>
<span class="line" id="L339"><span style="color: #24292EFF">  selector </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> [</span><span style="color: #22863A">&#39;:scope&#39;</span><span style="color: #212121">,</span><span style="color: #24292EFF"> selector]</span><span style="color: #6F42C1">.join</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#39; &#39;</span><span style="color: #24292EFF">);</span></span>
<span class="line empty-line" id="L340"></span>
<span class="line" id="L341"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">if</span><span style="color: #24292EFF"> (</span><span style="color: #D32F2F">typeof</span><span style="color: #24292EFF"> elem[</span><span style="color: #1976D2">Symbol</span><span style="color: #24292EFF">.iterator] </span><span style="color: #D32F2F">!==</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#39;function&#39;</span><span style="color: #24292EFF">) {</span></span>
<span class="line" id="L342"><span style="color: #24292EFF">    elem </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> [elem];</span></span>
<span class="line" id="L343"><span style="color: #24292EFF">  }</span></span>
<span class="line empty-line" id="L344"></span>
<span class="line" id="L345"><span style="color: #24292EFF">  </span><span style="color: #1976D2">elem</span><span style="color: #6F42C1">.forEach</span><span style="color: #24292EFF">((e) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L346"><span style="color: #24292EFF">    </span><span style="color: #1976D2">e</span><span style="color: #6F42C1">.querySelectorAll</span><span style="color: #24292EFF">(selector)</span><span style="color: #6F42C1">.forEach</span><span style="color: #24292EFF">((ee) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> {</span></span>
<span class="line" id="L347"><span style="color: #24292EFF">      </span><span style="color: #1976D2">collection</span><span style="color: #6F42C1">.push</span><span style="color: #24292EFF">(</span><span style="color: #D32F2F">new</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">DQueryNode</span><span style="color: #24292EFF">(ee));</span></span>
<span class="line" id="L348"><span style="color: #24292EFF">    });</span></span>
<span class="line" id="L349"><span style="color: #24292EFF">  });</span></span>
<span class="line empty-line" id="L350"></span>
<span class="line" id="L351"><span style="color: #24292EFF">  </span><span style="color: #D32F2F">return</span><span style="color: #24292EFF"> collection;</span></span>
<span class="line" id="L352"><span style="color: #24292EFF">}</span></span>
<span class="line empty-line" id="L353"></span>
<span class="line" id="L354"><span style="color: #D32F2F">export</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">default</span><span style="color: #24292EFF"> DQuery;</span></span>
<span class="line empty-line" id="L355"></span>
<span class="line empty-line" id="L356"></span></code></pre></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
