{"mappings":"AAAA,GAAI,GAA4B,GAU5B,KAAM,GAA0B,SAAS,EAAM,EAAM,CACrD,KAAM,GAAO,KAAM,EAAiB,SAAU,EAAe,iBAAkB,EAAW,EAC1F,GAAI,GAAK,EAAG,EACZ,EAAO,GAAQ,GAGf,YAAoB,CAChB,KAAM,GAAM,CACR,MAAO,GACP,GAAI,IACL,EAAS,GACZ,GAAI,CAAC,EAAe,KAAK,IAAS,CAAC,EAAa,KAAK,GAAO,MAAO,GAGnE,KAAO,GAAQ,EAAa,KAAK,MAAW,MAAK,EAAO,KAAK,EAAM,GAAG,MAAM,MAC5E,EAAO,EAAK,QAAQ,EAAc,IAClC,KAAM,GAAS,EAAK,MAAM,GAAiB,EAAW,EAAO,QAC7D,EAAO,QAAQ,CAAC,EAAK,EAAK,IAAM,CAC5B,EAAI,EAAI,GAAK,IAAM,EAAI,GAAK,KAGhC,GAAI,GAAM,EAAS,OACnB,KAAM,GAAU,EAAI,MACpB,SAAO,QAAQ,CAAC,EAAK,EAAK,IAAM,CAC5B,AAAI,EAAK,KAAS,IAAK,EAAI,GAAK,EAC3B,EAAQ,KAAK,GAClB,GAAO,EAAI,GAAK,OAAS,IAE7B,EAAI,MAAW,EACV,EAAI,MAAS,QAAQ,MAAO,GAAI,MACjC,EAAI,KAAU,IAAI,MAAO,GAAI,GAC1B,EAOX,GAJA,EAAO,OAAO,OAAO,EAAM,KAE3B,AAAI,EAAe,KAAK,GAAO,EAAK,EAAI,SAAS,cAAc,EAAK,MAAM,GAAgB,SACrF,EAAK,EAAI,SAAS,cAAc,GACjC,GACA,IAAI,IAAO,GAAK,GAAI,OAAO,UAAU,eAAe,KAAK,EAAM,GAE3D,GADI,MAAO,GAAK,IAAS,UAAY,MAAO,GAAK,GAAK,QAAW,UAAY,MAAO,GAAK,GAAK,QAAW,YAAY,GAAK,GAAO,EAAK,GAAK,KAAK,MAC5I,EAAI,aAAe,QAAS,EAAK,EAAE,UAAY,EAAK,WAC/C,EAAI,aAAe,OACxB,IAAI,IAAK,GAAK,GAAK,AAAI,OAAO,UAAU,eAAe,KAAK,EAAK,GAAM,IAAI,EAAK,EAAE,aAAa,QAAQ,IAAK,EAAK,GAAK,QACnH,GAAK,EAAE,aAAa,EAAK,EAAK,IAI7C,SAAK,EAAI,AAAC,GAAM,CAEZ,AAAK,MAAM,QAAQ,IAAM,GAAM,CAC3B,IAGyD,OAAQ,GAAI,EAAG,EAAM,EAAI,OAAQ,EAAI,GAC1F,MAAO,GAAI,IAAO,YAD6E,IAEnG,AAAI,MAAO,GAAI,GAAG,KAAQ,YAAa,EAAK,EAAE,YAAY,EAAI,GAAG,OAC5D,EAAK,EAAE,YAAY,EAAI,IAEhC,MAAO,IAGX,EAAK,EAAI,CAAC,EAAK,IAEP,UAAU,SAAW,EAAU,EAAK,MAExC,GAAU,GAAW,GAErB,AAAI,EAAS,EAAK,EAAE,UAAY,EAC3B,EAAK,EAAE,WAAa,EAClB,GAGX,EAAK,EAAI,AAAC,GAAM,CAEZ,GAAI,UAAU,SAAW,EAAG,MAAO,GAAK,MAExC,GAAI,EAAK,EAAE,YAAa,EAAK,EAAE,YAAc,MACxC,CACD,KAAM,GAAO,SAAS,eAAe,GACrC,EAAK,EAAE,YAAY,GAEvB,MAAO,IAGX,EAAK,IAAM,IAAI,EAAK,EAGpB,EAAK,IAAM,IAAI,CACX,KAAM,GAAI,SAAS,cAAc,OACjC,SAAE,YAAY,EAAK,GACZ,EAAE,WAGb,EAAK,IAAM,IAAI,CACX,KAAM,GAAI,SAAS,cAAc,OAEjC,MADA,GAAE,YAAY,EAAK,GACf,EAAE,UAAkB,EAAE,UACnB,EAAE,aAEN,GAGX,EAA4B,WAAa,CAAC,EAAM,IAAO,GAAI,GAAwB,EAAM,GAEzF,WAAW,IAAM,IAAI,IAAQ,CAEzB,KAAM,GAAI,SAAS,yBAA0B,EAAI,GAAI,GAAwB,OAAO,EAAE,GAAO,MAAM,WACnG,KAAM,EAAE,QAAO,EAAE,YAAY,EAAE,IAC/B,MAAO,IAEX,WAAW,EAAI,AAAC,GAAM,SAAS,eAAe,GAE9C,WAAW,EAAI,AAAC,GAAM,CAClB,KAAM,GAAI,SAAS,yBAA0B,EAAI,GAAI,GAAwB,OAAO,EAAE,GAAK,MAAM,WACjG,KAAM,EAAE,QAAO,EAAE,YAAY,EAAE,IAC/B,MAAO,IAIX,GAAI,GAA4B,GAK5B,OAAyC,CAKvC,YAAY,EAAK,CACf,KAAK,KAAO,EAMd,KAAM,CACJ,MAAO,MAAK,KAQd,SAAS,EAAU,CAEjB,MADA,GAAW,GAAY,GACnB,IAAa,GAAW,KAAK,SAC1B,GAAI,GAAmC,KAAK,KAAK,QAAQ,IAMlE,QAAS,CACP,MAAK,MAAK,KAAK,WACR,GAAI,GAAmC,KAAK,KAAK,YADtB,KASpC,YAAY,EAAU,CAEpB,MADA,GAAW,GAAY,GACnB,IAAa,GAAW,KAAK,WAC1B,GAAI,UAAS,EAAU,KAAK,MAOrC,SAAS,EAAU,CACjB,SAAW,GAAY,GAChB,MAAM,KAAK,KAAK,KAAK,YAAY,OAAO,AAAC,GAAI,EAAE,WAAa,KAAK,cACtE,OAAO,AAAC,GAAI,IAAa,IAAM,EAAE,QAAQ,IAAa,IAAa,IACnE,IAAI,AAAC,GAAI,GAAI,GAAmC,IAQpD,SAAS,EAAU,CAEjB,GADA,EAAW,GAAY,GACnB,CAAC,KAAK,KAAK,WAAY,MAAO,GAClC,GAAI,GAAU,KAAK,KAAK,WAAW,WACnC,KAAM,GAAW,GACjB,KAAM,GACF,AAAI,IAAY,KAAK,MACb,EAAQ,WAAa,KAAK,cAAiB,KAAa,IAAM,EAAQ,QAAQ,IAAa,IAAa,KAAK,EAAS,KAAK,GAAI,GAAmC,IAE1K,EAAU,EAAQ,YAEtB,MAAO,GAOT,KAAK,EAAU,CACb,EAAW,GAAY,GACvB,GAAI,GAAO,KAAK,KAAK,YACrB,KAAM,GAAK,CACP,GAAI,EAAK,WAAa,KAAK,cAAiB,KAAa,IAAM,EAAK,QAAQ,IAAa,IAAa,IAAK,MAAO,IAAI,GAAmC,GACzJ,EAAO,EAAK,YAEhB,MAAO,MAOT,KAAK,EAAU,CACb,EAAW,GAAY,GACvB,GAAI,GAAO,KAAK,KAAK,gBACrB,KAAM,GAAK,CACP,GAAI,EAAK,WAAa,KAAK,cAAiB,KAAa,IAAM,EAAK,QAAQ,IAAa,IAAa,IAAK,MAAO,IAAI,GAAmC,GACzJ,EAAO,EAAK,gBAEhB,MAAO,OAGf,EAA4B,SAAW,SAAS,EAAU,EAAM,CAC5D,KAAM,GAAa,GAEnB,MADA,GAAO,GAAQ,SACX,IAAS,SACT,UAAS,iBAAiB,GAAU,QAAQ,AAAC,GAAK,CAC9C,EAAW,KAAK,GAAI,GAAmC,MAEpD,GAEX,GAAW,CACP,SACA,GACF,KAAK,KACH,MAAO,GAAK,OAAO,WAAc,YAAY,GAAO,CACpD,IAEJ,EAAK,QAAQ,AAAC,GAAI,CACd,EAAE,iBAAiB,GAAU,QAAQ,AAAC,GAAK,CACvC,EAAW,KAAK,GAAI,GAAmC,QAGxD","sources":["dist/index.js"],"sourcesContent":["var $02b55e7ba43d9920$exports = {};\n/**\n * Const _ = DOMBuilder;\n *\n * _('p#id.class').h('what?')._([\n *   _.t(' '),\n *   _('i').h('italic'),\n *   _.h(' <span>and</span> '),\n *   _('b').h('bold')\n * ]);\n */ const $02b55e7ba43d9920$var$X = function(elem, attr) {\n    const self = this, RE_ID_OR_CLASS = /[\\.#]/u, RE_CSS_ATTRS = /\\[([^\\]]+)\\]/gu, ARR_NEXT = 1;\n    let key, k, match;\n    attr = attr || {\n    };\n    // Parse the CSS-style notation.\n    function notation() {\n        const att = {\n            class: [],\n            id: ''\n        }, kvPair = [];\n        if (!RE_ID_OR_CLASS.test(elem) && !RE_CSS_ATTRS.test(elem)) return {\n        };\n        // Collect all of the `[k=v]` blocks.\n        while((match = RE_CSS_ATTRS.exec(elem)) !== null)kvPair.push(match[1].split('='));\n        elem = elem.replace(RE_CSS_ATTRS, '');\n        const pieces = elem.split(RE_ID_OR_CLASS), elemType = pieces.shift();\n        kvPair.forEach((val, idx, arr)=>{\n            att[arr[idx][0]] = arr[idx][1];\n        });\n        // Support CSS/jQuery-style notation for generating elements with IDs and classnames.\n        let pos = elemType.length;\n        const classes = att['class'];\n        pieces.forEach((val, idx, arr)=>{\n            if (elem[pos] === '#') att.id = val;\n            else classes.push(val);\n            pos += arr[idx].length + ARR_NEXT;\n        });\n        att['class'] = classes;\n        if (!att['class'].length) delete att['class'];\n        if (att['id'] === '') delete att['id'];\n        return att;\n    }\n    // Merge options into a conglomo-hash!\n    attr = Object.assign(attr, notation());\n    // Construct the element, loop through the list of attributes and add them to the node.\n    if (RE_ID_OR_CLASS.test(elem)) self.e = document.createElement(elem.split(RE_ID_OR_CLASS).shift());\n    else self.e = document.createElement(elem);\n    if (attr) {\n        for(key in attr)if (Object.prototype.hasOwnProperty.call(attr, key)) {\n            if (typeof attr[key] === 'object' && typeof attr[key].length === 'number' && typeof attr[key].splice === 'function') attr[key] = attr[key].join(' ');\n            if (key.toString() === 'class') self.e.className = attr[key];\n            else if (key.toString() === 'data') {\n                for(k in attr[key])if (Object.prototype.hasOwnProperty.call(attr[key], k)) self.e.setAttribute(`data-${k}`, attr[key][k]);\n            } else self.e.setAttribute(key, attr[key]);\n        }\n    }\n    // Handle child nodes.\n    self._ = (obj)=>{\n        // If the object isn't an array, convert it to an array to maintain a single codepath below.\n        if (!Array.isArray(obj)) obj = [\n            obj\n        ];\n        /* Loop through the indexed array of children. If the node is a `DOMBuilder` object, convert it to\n       DOM and append it. Otherwise, assume it's a real DOM node. */ for(let i = 0, max = obj.length; i < max; i++){\n            if (typeof obj[i] === 'undefined') break;\n            if (typeof obj[i].dom !== 'undefined') self.e.appendChild(obj[i].dom());\n            else self.e.appendChild(obj[i]);\n        }\n        return self;\n    };\n    // Set the HTML\n    self.h = (str, replace)=>{\n        // No parameters? Read the value instead. Alias for .__h().\n        if (arguments.length === 0) return self.__h();\n        // Determine the default value for `replace`.\n        replace = replace || false;\n        // Set the value with innerHTML.\n        if (replace) self.e.innerHTML = str;\n        else self.e.innerHTML += str;\n        return self;\n    };\n    // Set the text\n    self.t = (str)=>{\n        // No parameters? Read the value instead. Alias for __t().\n        if (arguments.length === 0) return self.__t();\n        // Set the value\n        if (self.e.textContent) self.e.textContent = str;\n        else {\n            const text = document.createTextNode(str);\n            self.e.appendChild(text);\n        }\n        return self;\n    };\n    // Get DOMElement\n    self.dom = ()=>self.e\n    ;\n    // Get as HTML\n    self.__h = ()=>{\n        const t = document.createElement('div');\n        t.appendChild(self.e);\n        return t.innerHTML;\n    };\n    // Get as text\n    self.__t = ()=>{\n        const t = document.createElement('div');\n        t.appendChild(self.e);\n        if (t.innerText) return t.innerText;\n        return t.textContent;\n    };\n    return self;\n};\n// Pre-instantiate the class on each call so that you never need to use `new`.\n$02b55e7ba43d9920$exports = DOMBuilder = (elem, attr)=>new $02b55e7ba43d9920$var$X(elem, attr)\n; // eslint-disable-line no-undef\nDOMBuilder.DOM = (...nodes)=>{\n    // Create a document fragment. Grab and loop through the in-memory DOM nodes, and _move_ them to the\n    const f = document.createDocumentFragment(), n = new $02b55e7ba43d9920$var$X('div')._(nodes).dom().childNodes;\n    while(n.length)f.appendChild(n[0]);\n    return f;\n};\nDOMBuilder.t = (str)=>document.createTextNode(str)\n; // eslint-disable-line no-undef\nDOMBuilder.h = (str)=>{\n    const f = document.createDocumentFragment(), n = new $02b55e7ba43d9920$var$X('div').h(str).dom().childNodes;\n    while(n.length)f.appendChild(n[0]);\n    return f;\n};\n\n\nvar $991495e8b13a0cc2$exports = {};\n/**\n * Selecting/Traversal: $()\n *     .append(_)\n *     .wrap(_)\n */ class $991495e8b13a0cc2$var$DOMQueryNode {\n    /**\n   * DOMQueryNode wraps DOM Element objects with enhanced functionality.\n   *\n   * @param {Element} node A DOM Element object, which represents an HTML tag.\n   */ constructor(node){\n        this.node = node;\n    }\n    /**\n   * Gets the underlying native DOM Element object.\n   *\n   * @returns Element\n   */ get() {\n        return this.node;\n    }\n    /**\n   * Gets the nearest ancestor which matches a selector. If no selector is\n   * given, returns parent.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DOMQueryNode\n   */ ancestor(selector) {\n        selector = selector || '';\n        if (selector === '') return this.parent();\n        return new $991495e8b13a0cc2$var$DOMQueryNode(this.node.closest(selector));\n    }\n    /**\n   * Gets the immediate parent element.\n   *\n   * @returns DOMQueryNode\n   */ parent() {\n        if (!this.node.parentNode) return null;\n        return new $991495e8b13a0cc2$var$DOMQueryNode(this.node.parentNode);\n    }\n    /**\n   * Gets all descendants which match a selector. If no selector is given,\n   * returns children.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DOMQuery\n   */ descendants(selector) {\n        selector = selector || '';\n        if (selector === '') return this.children();\n        return new DOMQuery(selector, this.node); // eslint-disable-line no-undef\n    }\n    /**\n   * Gets all immediate children which match a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns []DOMQueryNode\n   */ children(selector) {\n        selector = selector || '';\n        return Array.from(this.node.childNodes).filter((e)=>e.nodeType === Node.ELEMENT_NODE\n        ).filter((e)=>selector !== '' && e.matches(selector) || selector === ''\n        ).map((e)=>new $991495e8b13a0cc2$var$DOMQueryNode(e)\n        );\n    }\n    /**\n   * Gets all sibling elements of the immediate parent which match a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns []DOMQueryNode\n   */ siblings(selector) {\n        selector = selector || '';\n        if (!this.node.parentNode) return [];\n        let sibling = this.node.parentNode.firstChild;\n        const siblings = [];\n        while(sibling){\n            if (sibling !== this.node) {\n                if (sibling.nodeType === Node.ELEMENT_NODE && (selector !== '' && sibling.matches(selector) || selector === '')) siblings.push(new $991495e8b13a0cc2$var$DOMQueryNode(sibling));\n            }\n            sibling = sibling.nextSibling;\n        }\n        return siblings;\n    }\n    /**\n   * Gets the immediately-next sibling which matches a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DOMQueryNode\n   */ next(selector) {\n        selector = selector || '';\n        let next = this.node.nextSibling;\n        while(next){\n            if (next.nodeType === Node.ELEMENT_NODE && (selector !== '' && next.matches(selector) || selector === '')) return new $991495e8b13a0cc2$var$DOMQueryNode(next);\n            next = next.nextSibling;\n        }\n        return null;\n    }\n    /**\n   * Gets the immediately-previous sibling which matches a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DOMQueryNode\n   */ prev(selector) {\n        selector = selector || '';\n        let prev = this.node.previousSibling;\n        while(prev){\n            if (prev.nodeType === Node.ELEMENT_NODE && (selector !== '' && prev.matches(selector) || selector === '')) return new $991495e8b13a0cc2$var$DOMQueryNode(prev);\n            prev = prev.previousSibling;\n        }\n        return null;\n    }\n}\n$991495e8b13a0cc2$exports = DOMQuery = function(selector, elem) {\n    const collection = [];\n    elem = elem || document;\n    if (elem === document) {\n        document.querySelectorAll(selector).forEach((ee)=>{\n            collection.push(new $991495e8b13a0cc2$var$DOMQueryNode(ee));\n        });\n        return collection;\n    }\n    selector = [\n        ':scope',\n        selector\n    ].join(' ');\n    if (typeof elem[Symbol.iterator] !== 'function') elem = [\n        elem\n    ];\n    elem.forEach((e)=>{\n        e.querySelectorAll(selector).forEach((ee)=>{\n            collection.push(new $991495e8b13a0cc2$var$DOMQueryNode(ee));\n        });\n    });\n    return collection;\n};\n\n\n\n\n//# sourceMappingURL=index.js.map\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,data:application/json;charset=utf-8;base64,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QVEsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBSyxDQUFDO1lBQ25ELFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGtDQUFZLENBQUMsRUFBRTtRQUNyQyxDQUFDO1FBRUQsTUFBTSxDQUFDLFVBQVU7SUFDbkIsQ0FBQztJQUVELFFBQVEsR0FBRyxDQUFDO1FBQUEsQ0FBUTtRQUFFLFFBQVE7SUFBQSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUc7SUFFeEMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsTUFBTSxDQUFVLFdBQzdDLElBQUksR0FBRyxDQUFDO1FBQUEsSUFBSTtJQUFBLENBQUM7SUFHZixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBSyxDQUFDO1FBQ25CLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBSyxDQUFDO1lBQzVDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGtDQUFZLENBQUMsRUFBRTtRQUNyQyxDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQyxVQUFVO0FBQ25CLENBQUM7OyIsInNvdXJjZXMiOlsic3JjL2luZGV4LmpzIiwic3JjL3Zkb20uanMiLCJzcmMvcXVlcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERPTUJ1aWxkZXIgZnJvbSAnLi92ZG9tJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IERPTVF1ZXJ5IGZyb20gJy4vcXVlcnknOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4iLCIvKipcbiAqIENvbnN0IF8gPSBET01CdWlsZGVyO1xuICpcbiAqIF8oJ3AjaWQuY2xhc3MnKS5oKCd3aGF0PycpLl8oW1xuICogICBfLnQoJyAnKSxcbiAqICAgXygnaScpLmgoJ2l0YWxpYycpLFxuICogICBfLmgoJyA8c3Bhbj5hbmQ8L3NwYW4+ICcpLFxuICogICBfKCdiJykuaCgnYm9sZCcpXG4gKiBdKTtcbiAqL1xuY29uc3QgWCA9IGZ1bmN0aW9uKGVsZW0sIGF0dHIpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXMsXG4gICAgUkVfSURfT1JfQ0xBU1MgPSAvW1xcLiNdL3UsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgICBSRV9DU1NfQVRUUlMgPSAvXFxbKFteXFxdXSspXFxdL2d1LFxuICAgIEFSUl9ORVhUID0gMTtcblxuICBsZXQga2V5LCBrLCBtYXRjaDtcblxuICBhdHRyID0gYXR0ciB8fCB7fTtcblxuICAvLyBQYXJzZSB0aGUgQ1NTLXN0eWxlIG5vdGF0aW9uLlxuICBmdW5jdGlvbiBub3RhdGlvbigpIHtcbiAgICBjb25zdCBhdHQgPSB7XG4gICAgICAgIGNsYXNzOiBbXSxcbiAgICAgICAgaWQ6ICcnLFxuICAgICAgfSxcbiAgICAgIGt2UGFpciA9IFtdO1xuXG4gICAgaWYgKCFSRV9JRF9PUl9DTEFTUy50ZXN0KGVsZW0pICYmICFSRV9DU1NfQVRUUlMudGVzdChlbGVtKSkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIC8vIENvbGxlY3QgYWxsIG9mIHRoZSBgW2s9dl1gIGJsb2Nrcy5cbiAgICB3aGlsZSAoKG1hdGNoID0gUkVfQ1NTX0FUVFJTLmV4ZWMoZWxlbSkpICE9PSBudWxsKSB7XG4gICAgICBrdlBhaXIucHVzaChtYXRjaFsxXS5zcGxpdCgnPScpKTtcbiAgICB9XG5cbiAgICBlbGVtID0gZWxlbS5yZXBsYWNlKFJFX0NTU19BVFRSUywgJycpO1xuICAgIGNvbnN0IHBpZWNlcyA9IGVsZW0uc3BsaXQoUkVfSURfT1JfQ0xBU1MpLFxuICAgICAgZWxlbVR5cGUgPSBwaWVjZXMuc2hpZnQoKTtcblxuICAgIGt2UGFpci5mb3JFYWNoKCh2YWwsIGlkeCwgYXJyKSA9PiB7XG4gICAgICBhdHRbYXJyW2lkeF1bMF1dID0gYXJyW2lkeF1bMV07XG4gICAgfSk7XG5cbiAgICAvLyBTdXBwb3J0IENTUy9qUXVlcnktc3R5bGUgbm90YXRpb24gZm9yIGdlbmVyYXRpbmcgZWxlbWVudHMgd2l0aCBJRHMgYW5kIGNsYXNzbmFtZXMuXG4gICAgbGV0IHBvcyA9IGVsZW1UeXBlLmxlbmd0aDtcbiAgICBjb25zdCBjbGFzc2VzID0gYXR0WydjbGFzcyddO1xuXG4gICAgcGllY2VzLmZvckVhY2goKHZhbCwgaWR4LCBhcnIpID0+IHtcbiAgICAgIGlmIChlbGVtW3Bvc10gPT09ICcjJykge1xuICAgICAgICBhdHQuaWQgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGFzc2VzLnB1c2godmFsKTtcbiAgICAgIH1cblxuICAgICAgcG9zICs9IGFycltpZHhdLmxlbmd0aCArIEFSUl9ORVhUO1xuICAgIH0pO1xuXG4gICAgYXR0WydjbGFzcyddID0gY2xhc3NlcztcbiAgICBpZiAoIWF0dFsnY2xhc3MnXS5sZW5ndGgpIHtcbiAgICAgIGRlbGV0ZSBhdHRbJ2NsYXNzJ107XG4gICAgfVxuXG4gICAgaWYgKGF0dFsnaWQnXSA9PT0gJycpIHtcbiAgICAgIGRlbGV0ZSBhdHRbJ2lkJ107XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dDtcbiAgfVxuXG4gIC8vIE1lcmdlIG9wdGlvbnMgaW50byBhIGNvbmdsb21vLWhhc2ghXG4gIGF0dHIgPSBPYmplY3QuYXNzaWduKGF0dHIsIG5vdGF0aW9uKCkpO1xuXG4gIC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudCwgbG9vcCB0aHJvdWdoIHRoZSBsaXN0IG9mIGF0dHJpYnV0ZXMgYW5kIGFkZCB0aGVtIHRvIHRoZSBub2RlLlxuICBpZiAoUkVfSURfT1JfQ0xBU1MudGVzdChlbGVtKSkge1xuICAgIHNlbGYuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbS5zcGxpdChSRV9JRF9PUl9DTEFTUykuc2hpZnQoKSk7XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtKTtcbiAgfVxuXG4gIGlmIChhdHRyKSB7XG4gICAgZm9yIChrZXkgaW4gYXR0cikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdHRyLCBrZXkpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYXR0cltrZXldID09PSAnb2JqZWN0J1xuICAgICAgICAgICYmIHR5cGVvZiBhdHRyW2tleV0ubGVuZ3RoID09PSAnbnVtYmVyJ1xuICAgICAgICAgICYmIHR5cGVvZiBhdHRyW2tleV0uc3BsaWNlID09PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgIGF0dHJba2V5XSA9IGF0dHJba2V5XS5qb2luKCcgJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICBzZWxmLmUuY2xhc3NOYW1lID0gYXR0cltrZXldO1xuXG4gICAgICAgICAgLy8gU3VwcG9ydCBgZGF0YToge31gIGZvciBkYXRhIGF0dHJpYnV0ZXNcbiAgICAgICAgfSBlbHNlIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gJ2RhdGEnKSB7XG4gICAgICAgICAgZm9yIChrIGluIGF0dHJba2V5XSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdHRyW2tleV0sIGspKSB7XG4gICAgICAgICAgICAgIHNlbGYuZS5zZXRBdHRyaWJ1dGUoYGRhdGEtJHsgayB9YCwgYXR0cltrZXldW2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5lLnNldEF0dHJpYnV0ZShrZXksIGF0dHJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgY2hpbGQgbm9kZXMuXG4gIHNlbGYuXyA9IChvYmopID0+IHtcbiAgICAvLyBJZiB0aGUgb2JqZWN0IGlzbid0IGFuIGFycmF5LCBjb252ZXJ0IGl0IHRvIGFuIGFycmF5IHRvIG1haW50YWluIGEgc2luZ2xlIGNvZGVwYXRoIGJlbG93LlxuICAgIGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICBvYmogPSBbb2JqXTtcbiAgICB9XG5cbiAgICAvKiBMb29wIHRocm91Z2ggdGhlIGluZGV4ZWQgYXJyYXkgb2YgY2hpbGRyZW4uIElmIHRoZSBub2RlIGlzIGEgYERPTUJ1aWxkZXJgIG9iamVjdCwgY29udmVydCBpdCB0b1xuICAgICAgIERPTSBhbmQgYXBwZW5kIGl0LiBPdGhlcndpc2UsIGFzc3VtZSBpdCdzIGEgcmVhbCBET00gbm9kZS4gKi9cbiAgICBmb3IgKGxldCBpID0gMCwgbWF4ID0gb2JqLmxlbmd0aDsgaSA8IG1heDsgaSArKykge1xuICAgICAgaWYgKHR5cGVvZiBvYmpbaV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9ialtpXS5kb20gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuZS5hcHBlbmRDaGlsZChvYmpbaV0uZG9tKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5lLmFwcGVuZENoaWxkKG9ialtpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLy8gU2V0IHRoZSBIVE1MXG4gIHNlbGYuaCA9IChzdHIsIHJlcGxhY2UpID0+IHtcbiAgICAvLyBObyBwYXJhbWV0ZXJzPyBSZWFkIHRoZSB2YWx1ZSBpbnN0ZWFkLiBBbGlhcyBmb3IgLl9faCgpLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gc2VsZi5fX2goKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIGByZXBsYWNlYC5cbiAgICByZXBsYWNlID0gcmVwbGFjZSB8fCBmYWxzZTtcblxuICAgIC8vIFNldCB0aGUgdmFsdWUgd2l0aCBpbm5lckhUTUwuXG4gICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgIHNlbGYuZS5pbm5lckhUTUwgPSBzdHI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuZS5pbm5lckhUTUwgKz0gc3RyO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIFNldCB0aGUgdGV4dFxuICBzZWxmLnQgPSAoc3RyKSA9PiB7XG4gICAgLy8gTm8gcGFyYW1ldGVycz8gUmVhZCB0aGUgdmFsdWUgaW5zdGVhZC4gQWxpYXMgZm9yIF9fdCgpLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gc2VsZi5fX3QoKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIHZhbHVlXG4gICAgaWYgKHNlbGYuZS50ZXh0Q29udGVudCkge1xuICAgICAgc2VsZi5lLnRleHRDb250ZW50ID0gc3RyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3RyKTtcblxuICAgICAgc2VsZi5lLmFwcGVuZENoaWxkKHRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIEdldCBET01FbGVtZW50XG4gIHNlbGYuZG9tID0gKCkgPT4gc2VsZi5lO1xuXG4gIC8vIEdldCBhcyBIVE1MXG4gIHNlbGYuX19oID0gKCkgPT4ge1xuICAgIGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHQuYXBwZW5kQ2hpbGQoc2VsZi5lKTtcblxuICAgIHJldHVybiB0LmlubmVySFRNTDtcbiAgfTtcblxuICAvLyBHZXQgYXMgdGV4dFxuICBzZWxmLl9fdCA9ICgpID0+IHtcbiAgICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICB0LmFwcGVuZENoaWxkKHNlbGYuZSk7XG5cbiAgICBpZiAodC5pbm5lclRleHQpIHtcbiAgICAgIHJldHVybiB0LmlubmVyVGV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gdC50ZXh0Q29udGVudDtcbiAgfTtcblxuICByZXR1cm4gc2VsZjtcbn07XG5cbi8vIFByZS1pbnN0YW50aWF0ZSB0aGUgY2xhc3Mgb24gZWFjaCBjYWxsIHNvIHRoYXQgeW91IG5ldmVyIG5lZWQgdG8gdXNlIGBuZXdgLlxubW9kdWxlLmV4cG9ydHMgPSBET01CdWlsZGVyID0gKGVsZW0sIGF0dHIpID0+IG5ldyBYKGVsZW0sIGF0dHIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbkRPTUJ1aWxkZXIuRE9NID0gKC4uLm5vZGVzKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgLy8gQ3JlYXRlIGEgZG9jdW1lbnQgZnJhZ21lbnQuIEdyYWIgYW5kIGxvb3AgdGhyb3VnaCB0aGUgaW4tbWVtb3J5IERPTSBub2RlcywgYW5kIF9tb3ZlXyB0aGVtIHRvIHRoZVxuICBjb25zdCBmID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgIG4gPSBuZXcgWCgnZGl2JykuXyhub2RlcykuXG4gICAgICBkb20oKS5jaGlsZE5vZGVzO1xuXG4gIHdoaWxlIChuLmxlbmd0aCkge1xuICAgIGYuYXBwZW5kQ2hpbGQoblswXSk7XG4gIH1cblxuICByZXR1cm4gZjtcbn07XG5cbkRPTUJ1aWxkZXIudCA9IHN0ciA9PiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbkRPTUJ1aWxkZXIuaCA9IChzdHIpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICBjb25zdCBmID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgIG4gPSBuZXcgWCgnZGl2JykuaChzdHIpLlxuICAgICAgZG9tKCkuY2hpbGROb2RlcztcblxuICB3aGlsZSAobi5sZW5ndGgpIHtcbiAgICBmLmFwcGVuZENoaWxkKG5bMF0pO1xuICB9XG5cbiAgcmV0dXJuIGY7XG59O1xuIiwiLyoqXG4gKiBTZWxlY3RpbmcvVHJhdmVyc2FsOiAkKClcbiAqICAgICAuYXBwZW5kKF8pXG4gKiAgICAgLndyYXAoXylcbiAqL1xuY2xhc3MgRE9NUXVlcnlOb2RlIHtcbiAgLyoqXG4gICAqIERPTVF1ZXJ5Tm9kZSB3cmFwcyBET00gRWxlbWVudCBvYmplY3RzIHdpdGggZW5oYW5jZWQgZnVuY3Rpb25hbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlIEEgRE9NIEVsZW1lbnQgb2JqZWN0LCB3aGljaCByZXByZXNlbnRzIGFuIEhUTUwgdGFnLlxuICAgKi9cbiAgY29uc3RydWN0b3Iobm9kZSkge1xuICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdW5kZXJseWluZyBuYXRpdmUgRE9NIEVsZW1lbnQgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJucyBFbGVtZW50XG4gICAqL1xuICBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHdoaWNoIG1hdGNoZXMgYSBzZWxlY3Rvci4gSWYgbm8gc2VsZWN0b3IgaXNcbiAgICogZ2l2ZW4sIHJldHVybnMgcGFyZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgRE9NUXVlcnlOb2RlXG4gICAqL1xuICBhbmNlc3RvcihzZWxlY3Rvcikge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJyc7XG5cbiAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERPTVF1ZXJ5Tm9kZSh0aGlzLm5vZGUuY2xvc2VzdChzZWxlY3RvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltbWVkaWF0ZSBwYXJlbnQgZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybnMgRE9NUXVlcnlOb2RlXG4gICAqL1xuICBwYXJlbnQoKSB7XG4gICAgaWYgKCF0aGlzLm5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBET01RdWVyeU5vZGUodGhpcy5ub2RlLnBhcmVudE5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIGRlc2NlbmRhbnRzIHdoaWNoIG1hdGNoIGEgc2VsZWN0b3IuIElmIG5vIHNlbGVjdG9yIGlzIGdpdmVuLFxuICAgKiByZXR1cm5zIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgRE9NUXVlcnlcbiAgICovXG4gIGRlc2NlbmRhbnRzKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcblxuICAgIGlmIChzZWxlY3RvciA9PT0gJycpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBET01RdWVyeShzZWxlY3RvciwgdGhpcy5ub2RlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIGltbWVkaWF0ZSBjaGlsZHJlbiB3aGljaCBtYXRjaCBhIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgW11ET01RdWVyeU5vZGVcbiAgICovXG4gIGNoaWxkcmVuKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubm9kZS5jaGlsZE5vZGVzKS5cbiAgICAgIGZpbHRlcihlID0+IGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKS5cbiAgICAgIGZpbHRlcihlID0+IChzZWxlY3RvciAhPT0gJycgJiYgZS5tYXRjaGVzKHNlbGVjdG9yKSkgfHwgKHNlbGVjdG9yID09PSAnJykpLlxuICAgICAgbWFwKGUgPT4gbmV3IERPTVF1ZXJ5Tm9kZShlKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbGwgc2libGluZyBlbGVtZW50cyBvZiB0aGUgaW1tZWRpYXRlIHBhcmVudCB3aGljaCBtYXRjaCBhIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgW11ET01RdWVyeU5vZGVcbiAgICovXG4gIHNpYmxpbmdzKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcblxuICAgIGlmICghdGhpcy5ub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgc2libGluZyA9IHRoaXMubm9kZS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XG4gICAgY29uc3Qgc2libGluZ3MgPSBbXTtcblxuICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICBpZiAoc2libGluZyAhPT0gdGhpcy5ub2RlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzaWJsaW5nLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERVxuICAgICAgICAgICYmIChcbiAgICAgICAgICAgIChzZWxlY3RvciAhPT0gJycgJiYgc2libGluZy5tYXRjaGVzKHNlbGVjdG9yKSlcbiAgICAgICAgICAgIHx8IChzZWxlY3RvciA9PT0gJycpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzaWJsaW5ncy5wdXNoKG5ldyBET01RdWVyeU5vZGUoc2libGluZykpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBzaWJsaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbW1lZGlhdGVseS1uZXh0IHNpYmxpbmcgd2hpY2ggbWF0Y2hlcyBhIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgRE9NUXVlcnlOb2RlXG4gICAqL1xuICBuZXh0KHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcbiAgICBsZXQgbmV4dCA9IHRoaXMubm9kZS5uZXh0U2libGluZztcblxuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBpZiAoXG4gICAgICAgIG5leHQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFXG4gICAgICAgICYmIChcbiAgICAgICAgICAoc2VsZWN0b3IgIT09ICcnICYmIG5leHQubWF0Y2hlcyhzZWxlY3RvcikpXG4gICAgICAgICAgfHwgKHNlbGVjdG9yID09PSAnJylcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBuZXcgRE9NUXVlcnlOb2RlKG5leHQpO1xuICAgICAgfVxuXG4gICAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbW1lZGlhdGVseS1wcmV2aW91cyBzaWJsaW5nIHdoaWNoIG1hdGNoZXMgYSBzZWxlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIChPcHRpb25hbCkgQ1NTIHNlbGVjdG9yIHRvIG1hdGNoLCBpZiBhbnkuXG4gICAqIEByZXR1cm5zIERPTVF1ZXJ5Tm9kZVxuICAgKi9cbiAgcHJldihzZWxlY3Rvcikge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJyc7XG4gICAgbGV0IHByZXYgPSB0aGlzLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXG4gICAgd2hpbGUgKHByZXYpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcHJldi5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREVcbiAgICAgICAgJiYgKFxuICAgICAgICAgIChzZWxlY3RvciAhPT0gJycgJiYgcHJldi5tYXRjaGVzKHNlbGVjdG9yKSlcbiAgICAgICAgICB8fCAoc2VsZWN0b3IgPT09ICcnKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBET01RdWVyeU5vZGUocHJldik7XG4gICAgICB9XG5cbiAgICAgIHByZXYgPSBwcmV2LnByZXZpb3VzU2libGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERPTVF1ZXJ5ID0gZnVuY3Rpb24oc2VsZWN0b3IsIGVsZW0pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICBjb25zdCBjb2xsZWN0aW9uID0gW107XG5cbiAgZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG4gIGlmIChlbGVtID09PSBkb2N1bWVudCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVlKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2gobmV3IERPTVF1ZXJ5Tm9kZShlZSkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gIH1cblxuICBzZWxlY3RvciA9IFsnOnNjb3BlJywgc2VsZWN0b3JdLmpvaW4oJyAnKTtcblxuICBpZiAodHlwZW9mIGVsZW1bU3ltYm9sLml0ZXJhdG9yXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGVsZW0gPSBbZWxlbV07XG4gIH1cblxuICBlbGVtLmZvckVhY2goKGUpID0+IHtcbiAgICBlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVlKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2gobmV3IERPTVF1ZXJ5Tm9kZShlZSkpO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gY29sbGVjdGlvbjtcbn07XG4iXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kaXN0L2luZGV4LmpzLm1hcCJ9"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../"}