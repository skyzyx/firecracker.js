{"mappings":"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","sources":["dist/dquery.js"],"sourcesContent":["function $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $d06b2385a2707aa5$export$2e2bcd8739ae039);\nclass $d06b2385a2707aa5$var$DQueryNode {\n    /**\n   * DQueryNode wraps DOM Element objects with enhanced functionality.\n   *\n   * @param {Element} node A DOM Element object, which represents an HTML tag.\n   */ constructor(node){\n        this.node = node;\n    }\n    /**\n   * Gets the underlying native DOM Element object.\n   *\n   * @returns Element\n   */ get() {\n        return this.node;\n    }\n    /**\n   * Gets the nearest ancestor which matches a selector. If no selector is\n   * given, returns parent.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DQueryNode\n   */ ancestor(selector) {\n        selector = selector || '';\n        if (selector === '') return this.parent();\n        return new $d06b2385a2707aa5$var$DQueryNode(this.node.closest(selector));\n    }\n    /**\n   * Gets the immediate parent element.\n   *\n   * @returns DQueryNode\n   */ parent() {\n        if (!this.node.parentNode) return null;\n        return new $d06b2385a2707aa5$var$DQueryNode(this.node.parentNode);\n    }\n    /**\n   * Gets all descendants which match a selector. If no selector is given,\n   * returns children.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DQuery\n   */ descendants(selector) {\n        selector = selector || '';\n        if (selector === '') return this.children();\n        return new $d06b2385a2707aa5$var$DQuery(selector, this.node); // eslint-disable-line no-undef\n    }\n    /**\n   * Gets all immediate children which match a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns []DQueryNode\n   */ children(selector) {\n        selector = selector || '';\n        return Array.from(this.node.childNodes).filter((e)=>e.nodeType === Node.ELEMENT_NODE\n        ).filter((e)=>selector !== '' && e.matches(selector) || selector === ''\n        ).map((e)=>new $d06b2385a2707aa5$var$DQueryNode(e)\n        );\n    }\n    /**\n   * Gets all sibling elements of the immediate parent which match a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns []DQueryNode\n   */ siblings(selector) {\n        selector = selector || '';\n        if (!this.node.parentNode) return [];\n        let sibling = this.node.parentNode.firstChild;\n        const siblings = [];\n        while(sibling){\n            if (sibling !== this.node) {\n                if (sibling.nodeType === Node.ELEMENT_NODE && (selector !== '' && sibling.matches(selector) || selector === '')) siblings.push(new $d06b2385a2707aa5$var$DQueryNode(sibling));\n            }\n            sibling = sibling.nextSibling;\n        }\n        return siblings;\n    }\n    /**\n   * Gets the immediately-next sibling which matches a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DQueryNode\n   */ next(selector) {\n        selector = selector || '';\n        let next = this.node.nextSibling;\n        while(next){\n            if (next.nodeType === Node.ELEMENT_NODE && (selector !== '' && next.matches(selector) || selector === '')) return new $d06b2385a2707aa5$var$DQueryNode(next);\n            next = next.nextSibling;\n        }\n        return null;\n    }\n    /**\n   * Gets the immediately-previous sibling which matches a selector.\n   *\n   * @param {string} selector (Optional) CSS selector to match, if any.\n   * @returns DQueryNode\n   */ prev(selector) {\n        selector = selector || '';\n        let prev = this.node.previousSibling;\n        while(prev){\n            if (prev.nodeType === Node.ELEMENT_NODE && (selector !== '' && prev.matches(selector) || selector === '')) return new $d06b2385a2707aa5$var$DQueryNode(prev);\n            prev = prev.previousSibling;\n        }\n        return null;\n    }\n    /**\n   * Prepends the provided element to the selected node, then returns a pointer\n   * to the prepended node in the DOM.\n   *\n   * @param {Element} element (Required) The DOM element to prepend.\n   * @returns DQueryNode\n   */ prepend(element) {\n        if (typeof element.dom !== 'undefined') this.node.insertAdjacentElement('afterbegin', element.dom());\n        else this.node.insertAdjacentElement('afterbegin', element);\n        return new $d06b2385a2707aa5$var$DQueryNode(this.node.childNodes[0]);\n    }\n    /**\n   * Appends the provided element to the selected node, then returns a pointer\n   * to the appended node in the DOM.\n   *\n   * @param {Element} element (Required) The DOM element to append.\n   * @returns DQueryNode\n   */ append(element) {\n        if (typeof element.dom !== 'undefined') this.node.insertAdjacentElement('beforeend', element.dom());\n        else this.node.insertAdjacentElement('beforeend', element);\n        return new $d06b2385a2707aa5$var$DQueryNode(this.node.childNodes[this.node.childNodes.length - 1]);\n    }\n    /**\n   * Inserts the provided element before the selected node, then returns a\n   * pointer to the added node in the DOM.\n   *\n   * @param {Element} element (Required) The DOM element to insert before.\n   * @returns DQueryNode\n   */ before(element) {\n        if (typeof element.dom !== 'undefined') this.node.before(element.dom());\n        else this.node.before(element);\n        return this.prev();\n    }\n    /**\n   * Inserts the provided element after the selected node, then returns a\n   * pointer to the added node in the DOM.\n   *\n   * @param {Element} element (Required) The DOM element to insert after.\n   * @returns DQueryNode\n   */ after(element) {\n        if (typeof element.dom !== 'undefined') this.node.after(element.dom());\n        else this.node.after(element);\n        return this.next();\n    }\n    /**\n   * Returns the list of classnames currently applied to the element.\n   *\n   * @returns DOMTokenList\n   */ classes() {\n        const node = this.node;\n        return node.classList;\n    }\n    /**\n   * Determines whether or not the element has the specified classname applied.\n   *\n   * @param {string} klass (Required) The classname to check on the element.\n   * @returns bool\n   */ has(klass) {\n        const node = this.node;\n        return node.classList.contains(klass);\n    }\n    /**\n   * Adds the specified classname to the element.\n   *\n   * @param {string} klass (Required) The classname to add to the element.\n   * @returns bool\n   */ add(klass) {\n        const node = this.node;\n        return node.classList.add(klass);\n    }\n    /**\n   * Removes the specified classname to the element.\n   *\n   * @param {string} klass (Required) The classname to remove from the element.\n   * @returns bool\n   */ remove(klass) {\n        const node = this.node;\n        return node.classList.remove(klass);\n    }\n    /**\n   * Replaces the specified classname on the element with another classname.\n   *\n   * @param {string} klass1 (Required) The classname to remove from the element.\n   * @param {string} klass2 (Required) The classname to add to the element.\n   * @returns bool\n   */ replace(klass1, klass2) {\n        const node = this.node;\n        return node.classList.replace(klass1, klass2);\n    }\n    /**\n   * Toggles a classname on the element. Returns a boolean value, `true` or\n   * `false`, indicating whether or not `klass` is in the list of classnames\n   * after the call or not.\n   *\n   * @param {string} klass (Required) The classname to toggle on the element.\n   * @returns bool\n   */ toggle(klass) {\n        const node = this.node;\n        return node.classList.toggle(klass);\n    }\n    /**\n   * A wrapper for addEventListener with `once: false`.\n   *\n   * @param {string} type A valid event type, like `click`. See\n   *     <https://developer.mozilla.org/en-US/docs/Web/Events> or more information.\n   * @param {string|function|Delegate} fn A callback function to execute, or a string\n   *     containing the name of the function.\n   * @returns EventPointer\n   */ on(type, fn) {\n        const node = this.node;\n        node.addEventListener(type, fn, {\n            once: false\n        });\n        return {\n            remove: function() {\n                node.removeEventListener(type, fn, {\n                    once: false\n                });\n            }\n        };\n    }\n}\nfunction $d06b2385a2707aa5$var$DQuery(selector, elem) {\n    // eslint-disable-line no-undef\n    if (selector instanceof Element) return new $d06b2385a2707aa5$var$DQueryNode(selector);\n    const collection = [];\n    elem = elem || document;\n    if (elem === document) {\n        document.querySelectorAll(selector).forEach((ee)=>{\n            collection.push(new $d06b2385a2707aa5$var$DQueryNode(ee));\n        });\n        return collection;\n    }\n    selector = [\n        ':scope',\n        selector\n    ].join(' ');\n    if (typeof elem[Symbol.iterator] !== 'function') elem = [\n        elem\n    ];\n    elem.forEach((e)=>{\n        e.querySelectorAll(selector).forEach((ee)=>{\n            collection.push(new $d06b2385a2707aa5$var$DQueryNode(ee));\n        });\n    });\n    return collection;\n}\nvar $d06b2385a2707aa5$export$2e2bcd8739ae039 = $d06b2385a2707aa5$var$DQuery;\n\n\n//# sourceMappingURL=dquery.js.map\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,data:application/json;charset=utf-8;base64,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LFFBQVE7SUFDdkIsRUFBRSxFQUFFLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixRQUFRLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUssQ0FBQztZQUNuRCxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQ0FBVSxDQUFDLEVBQUU7UUFDbkMsQ0FBQztRQUVELE1BQU0sQ0FBQyxVQUFVO0lBQ25CLENBQUM7SUFFRCxRQUFRLEdBQUcsQ0FBQztRQUFBLENBQVE7UUFBRSxRQUFRO0lBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFHO0lBRXhDLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLE1BQU0sQ0FBVSxXQUM3QyxJQUFJLEdBQUcsQ0FBQztRQUFBLElBQUk7SUFBQSxDQUFDO0lBR2YsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUssQ0FBQztRQUNuQixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUssQ0FBQztZQUM1QyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQ0FBVSxDQUFDLEVBQUU7UUFDbkMsQ0FBQztJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsVUFBVTtBQUNuQixDQUFDO0lBRUQsd0NBQXNCLEdBQVAsNEJBQU0iLCJzb3VyY2VzIjpbInNyYy9kcXVlcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRFF1ZXJ5Tm9kZSB7XG4gIC8qKlxuICAgKiBEUXVlcnlOb2RlIHdyYXBzIERPTSBFbGVtZW50IG9iamVjdHMgd2l0aCBlbmhhbmNlZCBmdW5jdGlvbmFsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgQSBET00gRWxlbWVudCBvYmplY3QsIHdoaWNoIHJlcHJlc2VudHMgYW4gSFRNTCB0YWcuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihub2RlKSB7XG4gICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1bmRlcmx5aW5nIG5hdGl2ZSBET00gRWxlbWVudCBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm5zIEVsZW1lbnRcbiAgICovXG4gIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG5lYXJlc3QgYW5jZXN0b3Igd2hpY2ggbWF0Y2hlcyBhIHNlbGVjdG9yLiBJZiBubyBzZWxlY3RvciBpc1xuICAgKiBnaXZlbiwgcmV0dXJucyBwYXJlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciAoT3B0aW9uYWwpIENTUyBzZWxlY3RvciB0byBtYXRjaCwgaWYgYW55LlxuICAgKiBAcmV0dXJucyBEUXVlcnlOb2RlXG4gICAqL1xuICBhbmNlc3RvcihzZWxlY3Rvcikge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJyc7XG5cbiAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERRdWVyeU5vZGUodGhpcy5ub2RlLmNsb3Nlc3Qoc2VsZWN0b3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbW1lZGlhdGUgcGFyZW50IGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm5zIERRdWVyeU5vZGVcbiAgICovXG4gIHBhcmVudCgpIHtcbiAgICBpZiAoIXRoaXMubm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERRdWVyeU5vZGUodGhpcy5ub2RlLnBhcmVudE5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIGRlc2NlbmRhbnRzIHdoaWNoIG1hdGNoIGEgc2VsZWN0b3IuIElmIG5vIHNlbGVjdG9yIGlzIGdpdmVuLFxuICAgKiByZXR1cm5zIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgRFF1ZXJ5XG4gICAqL1xuICBkZXNjZW5kYW50cyhzZWxlY3Rvcikge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJyc7XG5cbiAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbigpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRFF1ZXJ5KHNlbGVjdG9yLCB0aGlzLm5vZGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbGwgaW1tZWRpYXRlIGNoaWxkcmVuIHdoaWNoIG1hdGNoIGEgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciAoT3B0aW9uYWwpIENTUyBzZWxlY3RvciB0byBtYXRjaCwgaWYgYW55LlxuICAgKiBAcmV0dXJucyBbXURRdWVyeU5vZGVcbiAgICovXG4gIGNoaWxkcmVuKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubm9kZS5jaGlsZE5vZGVzKS5cbiAgICAgIGZpbHRlcihlID0+IGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKS5cbiAgICAgIGZpbHRlcihlID0+IChzZWxlY3RvciAhPT0gJycgJiYgZS5tYXRjaGVzKHNlbGVjdG9yKSkgfHwgc2VsZWN0b3IgPT09ICcnKS5cbiAgICAgIG1hcChlID0+IG5ldyBEUXVlcnlOb2RlKGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCBzaWJsaW5nIGVsZW1lbnRzIG9mIHRoZSBpbW1lZGlhdGUgcGFyZW50IHdoaWNoIG1hdGNoIGEgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciAoT3B0aW9uYWwpIENTUyBzZWxlY3RvciB0byBtYXRjaCwgaWYgYW55LlxuICAgKiBAcmV0dXJucyBbXURRdWVyeU5vZGVcbiAgICovXG4gIHNpYmxpbmdzKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcblxuICAgIGlmICghdGhpcy5ub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgc2libGluZyA9IHRoaXMubm9kZS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XG4gICAgY29uc3Qgc2libGluZ3MgPSBbXTtcblxuICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICBpZiAoc2libGluZyAhPT0gdGhpcy5ub2RlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzaWJsaW5nLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERVxuICAgICAgICAgICYmICgoc2VsZWN0b3IgIT09ICcnICYmIHNpYmxpbmcubWF0Y2hlcyhzZWxlY3RvcikpIHx8IHNlbGVjdG9yID09PSAnJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2libGluZ3MucHVzaChuZXcgRFF1ZXJ5Tm9kZShzaWJsaW5nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNpYmxpbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltbWVkaWF0ZWx5LW5leHQgc2libGluZyB3aGljaCBtYXRjaGVzIGEgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciAoT3B0aW9uYWwpIENTUyBzZWxlY3RvciB0byBtYXRjaCwgaWYgYW55LlxuICAgKiBAcmV0dXJucyBEUXVlcnlOb2RlXG4gICAqL1xuICBuZXh0KHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAnJztcbiAgICBsZXQgbmV4dCA9IHRoaXMubm9kZS5uZXh0U2libGluZztcblxuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBpZiAobmV4dC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgKChzZWxlY3RvciAhPT0gJycgJiYgbmV4dC5tYXRjaGVzKHNlbGVjdG9yKSkgfHwgc2VsZWN0b3IgPT09ICcnKSkge1xuICAgICAgICByZXR1cm4gbmV3IERRdWVyeU5vZGUobmV4dCk7XG4gICAgICB9XG5cbiAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltbWVkaWF0ZWx5LXByZXZpb3VzIHNpYmxpbmcgd2hpY2ggbWF0Y2hlcyBhIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gsIGlmIGFueS5cbiAgICogQHJldHVybnMgRFF1ZXJ5Tm9kZVxuICAgKi9cbiAgcHJldihzZWxlY3Rvcikge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJyc7XG4gICAgbGV0IHByZXYgPSB0aGlzLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXG4gICAgd2hpbGUgKHByZXYpIHtcbiAgICAgIGlmIChwcmV2Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiAoKHNlbGVjdG9yICE9PSAnJyAmJiBwcmV2Lm1hdGNoZXMoc2VsZWN0b3IpKSB8fCBzZWxlY3RvciA9PT0gJycpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRFF1ZXJ5Tm9kZShwcmV2KTtcbiAgICAgIH1cblxuICAgICAgcHJldiA9IHByZXYucHJldmlvdXNTaWJsaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBlbmRzIHRoZSBwcm92aWRlZCBlbGVtZW50IHRvIHRoZSBzZWxlY3RlZCBub2RlLCB0aGVuIHJldHVybnMgYSBwb2ludGVyXG4gICAqIHRvIHRoZSBwcmVwZW5kZWQgbm9kZSBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgKFJlcXVpcmVkKSBUaGUgRE9NIGVsZW1lbnQgdG8gcHJlcGVuZC5cbiAgICogQHJldHVybnMgRFF1ZXJ5Tm9kZVxuICAgKi9cbiAgcHJlcGVuZChlbGVtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LmRvbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubm9kZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlbGVtZW50LmRvbSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRFF1ZXJ5Tm9kZSh0aGlzLm5vZGUuY2hpbGROb2Rlc1swXSk7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyB0aGUgcHJvdmlkZWQgZWxlbWVudCB0byB0aGUgc2VsZWN0ZWQgbm9kZSwgdGhlbiByZXR1cm5zIGEgcG9pbnRlclxuICAgKiB0byB0aGUgYXBwZW5kZWQgbm9kZSBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgKFJlcXVpcmVkKSBUaGUgRE9NIGVsZW1lbnQgdG8gYXBwZW5kLlxuICAgKiBAcmV0dXJucyBEUXVlcnlOb2RlXG4gICAqL1xuICBhcHBlbmQoZWxlbWVudCkge1xuICAgIGlmICh0eXBlb2YgZWxlbWVudC5kb20gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm5vZGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLCBlbGVtZW50LmRvbSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlZW5kJywgZWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEUXVlcnlOb2RlKHRoaXMubm9kZS5jaGlsZE5vZGVzW3RoaXMubm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIHRoZSBwcm92aWRlZCBlbGVtZW50IGJlZm9yZSB0aGUgc2VsZWN0ZWQgbm9kZSwgdGhlbiByZXR1cm5zIGFcbiAgICogcG9pbnRlciB0byB0aGUgYWRkZWQgbm9kZSBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgKFJlcXVpcmVkKSBUaGUgRE9NIGVsZW1lbnQgdG8gaW5zZXJ0IGJlZm9yZS5cbiAgICogQHJldHVybnMgRFF1ZXJ5Tm9kZVxuICAgKi9cbiAgYmVmb3JlKGVsZW1lbnQpIHtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQuZG9tICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5ub2RlLmJlZm9yZShlbGVtZW50LmRvbSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlLmJlZm9yZShlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcmV2KCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0cyB0aGUgcHJvdmlkZWQgZWxlbWVudCBhZnRlciB0aGUgc2VsZWN0ZWQgbm9kZSwgdGhlbiByZXR1cm5zIGFcbiAgICogcG9pbnRlciB0byB0aGUgYWRkZWQgbm9kZSBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgKFJlcXVpcmVkKSBUaGUgRE9NIGVsZW1lbnQgdG8gaW5zZXJ0IGFmdGVyLlxuICAgKiBAcmV0dXJucyBEUXVlcnlOb2RlXG4gICAqL1xuICBhZnRlcihlbGVtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LmRvbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubm9kZS5hZnRlcihlbGVtZW50LmRvbSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlLmFmdGVyKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5leHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNsYXNzbmFtZXMgY3VycmVudGx5IGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm5zIERPTVRva2VuTGlzdFxuICAgKi9cbiAgY2xhc3NlcygpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlO1xuXG4gICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBvciBub3QgdGhlIGVsZW1lbnQgaGFzIHRoZSBzcGVjaWZpZWQgY2xhc3NuYW1lIGFwcGxpZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrbGFzcyAoUmVxdWlyZWQpIFRoZSBjbGFzc25hbWUgdG8gY2hlY2sgb24gdGhlIGVsZW1lbnQuXG4gICAqIEByZXR1cm5zIGJvb2xcbiAgICovXG4gIGhhcyhrbGFzcykge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGU7XG5cbiAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoa2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIHNwZWNpZmllZCBjbGFzc25hbWUgdG8gdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrbGFzcyAoUmVxdWlyZWQpIFRoZSBjbGFzc25hbWUgdG8gYWRkIHRvIHRoZSBlbGVtZW50LlxuICAgKiBAcmV0dXJucyBib29sXG4gICAqL1xuICBhZGQoa2xhc3MpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlO1xuXG4gICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0LmFkZChrbGFzcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGNsYXNzbmFtZSB0byB0aGUgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtsYXNzIChSZXF1aXJlZCkgVGhlIGNsYXNzbmFtZSB0byByZW1vdmUgZnJvbSB0aGUgZWxlbWVudC5cbiAgICogQHJldHVybnMgYm9vbFxuICAgKi9cbiAgcmVtb3ZlKGtsYXNzKSB7XG4gICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZTtcblxuICAgIHJldHVybiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoa2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSBzcGVjaWZpZWQgY2xhc3NuYW1lIG9uIHRoZSBlbGVtZW50IHdpdGggYW5vdGhlciBjbGFzc25hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrbGFzczEgKFJlcXVpcmVkKSBUaGUgY2xhc3NuYW1lIHRvIHJlbW92ZSBmcm9tIHRoZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2xhc3MyIChSZXF1aXJlZCkgVGhlIGNsYXNzbmFtZSB0byBhZGQgdG8gdGhlIGVsZW1lbnQuXG4gICAqIEByZXR1cm5zIGJvb2xcbiAgICovXG4gIHJlcGxhY2Uoa2xhc3MxLCBrbGFzczIpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlO1xuXG4gICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0LnJlcGxhY2Uoa2xhc3MxLCBrbGFzczIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgYSBjbGFzc25hbWUgb24gdGhlIGVsZW1lbnQuIFJldHVybnMgYSBib29sZWFuIHZhbHVlLCBgdHJ1ZWAgb3JcbiAgICogYGZhbHNlYCwgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCBga2xhc3NgIGlzIGluIHRoZSBsaXN0IG9mIGNsYXNzbmFtZXNcbiAgICogYWZ0ZXIgdGhlIGNhbGwgb3Igbm90LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2xhc3MgKFJlcXVpcmVkKSBUaGUgY2xhc3NuYW1lIHRvIHRvZ2dsZSBvbiB0aGUgZWxlbWVudC5cbiAgICogQHJldHVybnMgYm9vbFxuICAgKi9cbiAgdG9nZ2xlKGtsYXNzKSB7XG4gICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZTtcblxuICAgIHJldHVybiBub2RlLmNsYXNzTGlzdC50b2dnbGUoa2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgYWRkRXZlbnRMaXN0ZW5lciB3aXRoIGBvbmNlOiBmYWxzZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEEgdmFsaWQgZXZlbnQgdHlwZSwgbGlrZSBgY2xpY2tgLiBTZWVcbiAgICogICAgIDxodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHM+IG9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufERlbGVnYXRlfSBmbiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUsIG9yIGEgc3RyaW5nXG4gICAqICAgICBjb250YWluaW5nIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICogQHJldHVybnMgRXZlbnRQb2ludGVyXG4gICAqL1xuICBvbih0eXBlLCBmbikge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGU7XG5cbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIHtvbmNlOiBmYWxzZX0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwge29uY2U6IGZhbHNlfSk7XG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gRFF1ZXJ5KHNlbGVjdG9yLCBlbGVtKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgIHJldHVybiBuZXcgRFF1ZXJ5Tm9kZShzZWxlY3Rvcik7XG4gIH1cblxuICBjb25zdCBjb2xsZWN0aW9uID0gW107XG5cbiAgZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG4gIGlmIChlbGVtID09PSBkb2N1bWVudCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVlKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2gobmV3IERRdWVyeU5vZGUoZWUpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9XG5cbiAgc2VsZWN0b3IgPSBbJzpzY29wZScsIHNlbGVjdG9yXS5qb2luKCcgJyk7XG5cbiAgaWYgKHR5cGVvZiBlbGVtW1N5bWJvbC5pdGVyYXRvcl0gIT09ICdmdW5jdGlvbicpIHtcbiAgICBlbGVtID0gW2VsZW1dO1xuICB9XG5cbiAgZWxlbS5mb3JFYWNoKChlKSA9PiB7XG4gICAgZS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKChlZSkgPT4ge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKG5ldyBEUXVlcnlOb2RlKGVlKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb2xsZWN0aW9uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBEUXVlcnk7XG4iXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kaXN0L2RxdWVyeS5qcy5tYXAifQ=="],"names":[],"version":3,"file":"dquery.js.map","sourceRoot":"../"}