{"mappings":"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","sources":["dist/vdom.js"],"sourcesContent":["function $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $d0e0ac82cf77fdb6$export$2e2bcd8739ae039);\n// VDOM is an updated ES6+ version of a Virtual DOM implementation I built in\n// 2008 before Virtual DOM even had a name yet.\n//\n// The term “Virtual DOM” refers to real DOM nodes that exist in memory, but are\n// not attached to the _live_ tree. This means that they can be modified and\n// manipulated in-memory without triggering repaints and reflows in the browser\n// engine, making modifications dramatically faster.\n//\n// By leveraging `DocumentFragment` objects under the hood, we can collect one\n// or more sibling elements together which do not have a shared parent node\n// until they are injected into the live DOM. This is fundamentally the same way\n// that `React.createElement()` works, and the syntax is very similar.\n//\n// **Examples:**\n//\n// From the <https://reactjs.org> homepage, this example generates a new DOM\n// element and appends it to the live DOM.\n//\n// ```javascript\n// class HelloMessage extends React.Component {\n//   render() {\n//     return (\n//       <div>\n//         Hello {this.props.name}\n//       </div>\n//     );\n//     // or...\n//     // return React.createElement(\n//     //   \"div\",\n//     //   null,\n//     //   \"Hello \",\n//     //   this.props.name\n//     // );\n//   }\n// }\n//\n// ReactDOM.render(\n//   React.createElement(\n//     HelloMessage, { name: \"Taylor\" }\n//   ),\n//   document.getElementById('hello-example')\n// );\n// ```\n//\n// Here's a (roughly) equivalent example using VDOM, except that there are no\n// _magical_ `props` because there are no `components`. Just standard functions\n// and variables.\n//\n// ```javascript\n// const _ = VDOM,\n//       $ = DQuery;\n//\n// function HelloMessage(props) {\n//   return `\n//     <div>\n//       Hello ${props.name}\n//     </div>\n//   `;\n//   // or...\n//   // return _('div').h(`Hello ${props.name}`);\n// }\n//\n// $('#hello-example')[0].append(\n//   HelloMessage({ name: \"Taylor\" })\n// );\n// ```\n//\n// VDOM sits much “closer to the metal”, which makes it (a) faster, and (b)\n// smaller. While it lacks some of the niceties like JSX, you can still use\n// `innerHTML` which gets you _most_ of the way there at very little cost.\n//\n// ----\nconst $d0e0ac82cf77fdb6$var$X = function(elem, attr) {\n    const self = this, RE_ID_OR_CLASS = /[\\.#]/u, RE_CSS_ATTRS = /\\[([^\\]]+)\\]/gu, ARR_NEXT = 1;\n    let key, k, match;\n    attr = attr || {};\n    // Parse the CSS-style notation.\n    function notation() {\n        const att = {\n            class: [],\n            id: \"\"\n        }, kvPair = [];\n        if (!RE_ID_OR_CLASS.test(elem) && !RE_CSS_ATTRS.test(elem)) return {};\n        // Collect all of the `[k=v]` blocks.\n        while((match = RE_CSS_ATTRS.exec(elem)) !== null)kvPair.push(match[1].split(\"=\"));\n        elem = elem.replace(RE_CSS_ATTRS, \"\");\n        const pieces = elem.split(RE_ID_OR_CLASS), elemType = pieces.shift();\n        kvPair.forEach((val, idx, arr)=>{\n            att[arr[idx][0]] = arr[idx][1];\n        });\n        // Support CSS/jQuery-style notation for generating elements with IDs and classnames.\n        let pos = elemType.length;\n        const classes = att[\"class\"];\n        pieces.forEach((val, idx, arr)=>{\n            if (elem[pos] === \"#\") att.id = val;\n            else classes.push(val);\n            pos += arr[idx].length + ARR_NEXT;\n        });\n        att[\"class\"] = classes;\n        if (!att[\"class\"].length) delete att[\"class\"];\n        if (att[\"id\"] === \"\") delete att[\"id\"];\n        return att;\n    }\n    // Merge options into a conglomo-hash!\n    attr = Object.assign(attr, notation());\n    // Construct the element, loop through the list of attributes and add them to the node.\n    if (RE_ID_OR_CLASS.test(elem)) self.e = document.createElement(elem.split(RE_ID_OR_CLASS).shift());\n    else self.e = document.createElement(elem);\n    if (attr) {\n        for(key in attr)if (Object.prototype.hasOwnProperty.call(attr, key)) {\n            if (typeof attr[key] === \"object\" && typeof attr[key].length === \"number\" && typeof attr[key].splice === \"function\") attr[key] = attr[key].join(\" \");\n            if (key.toString() === \"class\") self.e.className = attr[key];\n            else if (key.toString() === \"data\") {\n                for(k in attr[key])if (Object.prototype.hasOwnProperty.call(attr[key], k)) self.e.setAttribute(`data-${k}`, attr[key][k]);\n            } else self.e.setAttribute(key, attr[key]);\n        }\n    }\n    // Handle child nodes.\n    self._ = (obj)=>{\n        // If the object isn't an array, convert it to an array to maintain a single codepath below.\n        if (!Array.isArray(obj)) obj = [\n            obj\n        ];\n        // Loop through the indexed array of children. If the node is a `VDOM` object, convert it to\n        // DOM and append it. Otherwise, assume it's a real DOM node.\n        for(let i = 0, max = obj.length; i < max; i++){\n            if (typeof obj[i] === \"undefined\") break;\n            if (typeof obj[i].dom !== \"undefined\") self.e.appendChild(obj[i].dom());\n            else self.e.appendChild(obj[i]);\n        }\n        return self;\n    };\n    // Set the HTML\n    self.h = (str, replace)=>{\n        // Determine the default value for `replace`.\n        replace = replace || false;\n        // Set the value with innerHTML.\n        if (replace) self.e.innerHTML = str;\n        else self.e.innerHTML += str;\n        return self;\n    };\n    // Set the text\n    self.t = (str)=>{\n        // No parameters? Read the value instead. Alias for __t().\n        if (typeof str === \"undefined\") return self.__t();\n        // Set the value\n        const text = document.createTextNode(str);\n        self.e.appendChild(text);\n        return self;\n    };\n    // Get DOMElement\n    self.dom = ()=>self.e;\n    // Get as HTML\n    self.toString = ()=>{\n        const t = document.createElement(\"div\");\n        t.appendChild(self.e);\n        return t.innerHTML;\n    };\n    // Get as text\n    self.__t = ()=>{\n        const t = document.createElement(\"div\");\n        t.appendChild(self.e);\n        return t.textContent || t.innerText;\n    };\n    return self;\n}, // Pre-instantiate the class on each call so that you never need to use `new`.\n$d0e0ac82cf77fdb6$var$VDOM = (elem, attr)=>new $d0e0ac82cf77fdb6$var$X(elem, attr); // eslint-disable-line no-undef\n$d0e0ac82cf77fdb6$var$VDOM.DOM = (...nodes)=>{\n    // Create a document fragment. Grab and loop through the in-memory DOM nodes,\n    // and _move_ them to the `DocumentFragment`.\n    const f = document.createDocumentFragment(), n = new $d0e0ac82cf77fdb6$var$X(\"div\")._(nodes).dom().childNodes;\n    while(n.length)f.appendChild(n[0]);\n    return f;\n};\n$d0e0ac82cf77fdb6$var$VDOM.t = (str)=>document.createTextNode(str); // eslint-disable-line no-undef\n$d0e0ac82cf77fdb6$var$VDOM.h = (str)=>{\n    const f = document.createDocumentFragment(), n = new $d0e0ac82cf77fdb6$var$X(\"div\").h(str).dom().childNodes;\n    while(n.length)f.appendChild(n[0]);\n    return f;\n};\nvar // Default export for the package.\n$d0e0ac82cf77fdb6$export$2e2bcd8739ae039 = $d0e0ac82cf77fdb6$var$VDOM;\n\n\n//# sourceMappingURL=vdom.js.map\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLDZFQUE2RTtBQUM3RSwrQ0FBK0M7QUFDL0MsRUFBRTtBQUNGLG9GQUFnRjtBQUM1RSw0RUFBd0U7QUFDNUUsK0VBQStFO0FBQy9FLG9EQUFvRDtBQUNwRCxFQUFFO0FBQ0YsOEVBQThFO0FBQzlFLDJFQUEyRTtBQUMzRSxnRkFBZ0Y7QUFDaEYsc0VBQXNFO0FBQ3RFLEVBQUU7QUFDRixnQkFBZ0I7QUFDaEIsRUFBRTtBQUNGLDRFQUE0RTtBQUM1RSwwQ0FBMEM7QUFDMUMsRUFBRTtBQUNGLGdCQUFnQjtBQUNoQiwrQ0FBK0M7QUFDL0MsZUFBZTtBQUNmLGVBQWU7QUFDZixjQUFjO0FBQ2Qsa0NBQWtDO0FBQ2xDLGVBQWU7QUFDZixTQUFTO0FBQ1QsZUFBZTtBQUNmLHFDQUFxQztBQUNyQyxrQkFBa0I7QUFDbEIsaUJBQWlCO0FBQ2pCLHFCQUFxQjtBQUNyQiwyQkFBMkI7QUFDM0IsWUFBWTtBQUNaLE1BQU07QUFDTixJQUFJO0FBQ0osRUFBRTtBQUNGLG1CQUFtQjtBQUNuQix5QkFBeUI7QUFDekIsdUNBQXVDO0FBQ3ZDLE9BQU87QUFDUCw2Q0FBNkM7QUFDN0MsS0FBSztBQUNMLE1BQU07QUFDTixFQUFFO0FBQ0YsNkVBQTZFO0FBQzdFLCtFQUErRTtBQUMvRSxpQkFBaUI7QUFDakIsRUFBRTtBQUNGLGdCQUFnQjtBQUNoQixrQkFBa0I7QUFDbEIsb0JBQW9CO0FBQ3BCLEVBQUU7QUFDRixpQ0FBaUM7QUFDakMsYUFBYTtBQUNiLFlBQVk7QUFDWiw0QkFBNEI7QUFDNUIsYUFBYTtBQUNiLE9BQU87QUFDUCxhQUFhO0FBQ2IsaURBQWlEO0FBQ2pELElBQUk7QUFDSixFQUFFO0FBQ0YsaUNBQWlDO0FBQ2pDLHFDQUFxQztBQUNyQyxLQUFLO0FBQ0wsTUFBTTtBQUNOLEVBQUU7QUFDRiwrRUFBMkU7QUFDM0UsMkVBQTJFO0FBQzNFLDBFQUEwRTtBQUMxRSxFQUFFO0FBQ0YsT0FBTztBQUVQLE1BQU0sdUJBQUMsR0FBRyxTQUFTLElBQUksRUFBRSxJQUFJLEVBQUU7SUFDM0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUNmLGNBQWMsV0FBVyxFQUN6QixZQUFZLG1CQUFtQixFQUMvQixRQUFRLEdBQUcsQ0FBQyxBQUFDO0lBRWYsSUFBSSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssQUFBQztJQUVsQixJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUVsQixnQ0FBZ0M7SUFDaEMsU0FBUyxRQUFRLEdBQUc7UUFDbEIsTUFBTSxHQUFHLEdBQUc7WUFDUixLQUFLLEVBQUUsRUFBRTtZQUNULEVBQUUsRUFBRSxFQUFFO1NBQ1AsRUFDRCxNQUFNLEdBQUcsRUFBRSxBQUFDO1FBRWQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUN4RCxPQUFPLEVBQUUsQ0FBQztRQUdaLHFDQUFxQztRQUNyQyxNQUFPLEFBQUMsQ0FBQSxLQUFLLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQSxLQUFNLElBQUksQ0FDL0MsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFHbkMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQ3ZDLFFBQVEsR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLEFBQUM7UUFFNUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFLO1lBQ2hDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEMsQ0FBQyxDQUFDO1FBRUgscUZBQXFGO1FBQ3JGLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEFBQUM7UUFDMUIsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxBQUFDO1FBRTdCLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBSztZQUNoQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEVBQ25CLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO2lCQUViLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFHcEIsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO1NBQ25DLENBQUMsQ0FBQztRQUVILEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQ3RCLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBR3RCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFDbEIsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFHbkIsT0FBTyxHQUFHLENBQUM7S0FDWjtJQUVELHNDQUFzQztJQUN0QyxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUV2Qyx1RkFBdUY7SUFDdkYsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUMzQixJQUFJLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBRXBFLElBQUksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUd4QyxJQUFJLElBQUksRUFBRTtRQUNSLElBQUssR0FBRyxJQUFJLElBQUksQ0FDZCxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUU7WUFDbkQsSUFDRSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLElBQzVCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxRQUFRLElBQ3BDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxVQUFVLEVBRXZDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBR2xDLElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRSxLQUFLLE9BQU8sRUFDNUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUd4QixJQUFJLEdBQUcsQ0FBQyxRQUFRLEVBQUUsS0FBSyxNQUFNLEVBQUU7Z0JBQ3BDLElBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FDakIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUNwRCxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssRUFBRyxDQUFDLENBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBR3RELE1BQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBRXZDO0tBRUo7SUFFRCxzQkFBc0I7SUFDdEIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBSztRQUNsQiw0RkFBNEY7UUFDMUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQ3JCLEdBQUcsR0FBRztZQUFDLEdBQUc7U0FBQyxDQUFDO1FBR2QsNEZBQTRGO1FBQzVGLDZEQUE2RDtRQUM3RCxJQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRyxDQUFFO1lBQy9DLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssV0FBVyxFQUMvQixNQUFNO1lBR1IsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssV0FBVyxFQUNuQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztpQkFFakMsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FFOUI7UUFFRCxPQUFPLElBQUksQ0FBQztLQUNiLENBQUM7SUFFRixlQUFlO0lBQ2YsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUs7UUFDM0IsNkNBQTZDO1FBQzNDLE9BQU8sR0FBRyxPQUFPLElBQUksS0FBSyxDQUFDO1FBRTNCLGdDQUFnQztRQUNoQyxJQUFJLE9BQU8sRUFDVCxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7YUFFdkIsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDO1FBRzFCLE9BQU8sSUFBSSxDQUFDO0tBQ2IsQ0FBQztJQUVGLGVBQWU7SUFDZixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFLO1FBQ2xCLDBEQUEwRDtRQUN4RCxJQUFJLE9BQU8sR0FBRyxLQUFLLFdBQVcsRUFDNUIsT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFHcEIsZ0JBQWdCO1FBQ2hCLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEFBQUM7UUFFMUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekIsT0FBTyxJQUFJLENBQUM7S0FDYixDQUFDO0lBRUYsaUJBQWlCO0lBQ2pCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRXhCLGNBQWM7SUFDZCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQU07UUFDcEIsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQUFBQztRQUV4QyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV0QixPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUM7S0FDcEIsQ0FBQztJQUVGLGNBQWM7SUFDZCxJQUFJLENBQUMsR0FBRyxHQUFHLElBQU07UUFDZixNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxBQUFDO1FBRXhDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXRCLE9BQU8sQ0FBQyxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDO0tBQ3JDLENBQUM7SUFFRixPQUFPLElBQUksQ0FBQztDQUNiLEVBRUQsOEVBQThFO0FBQzlFLDBCQUFJLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxHQUFLLElBQUksdUJBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEFBQUMsRUFBQywrQkFBK0I7QUFFM0UsMEJBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBSSxHQUFBLEtBQUssR0FBSztJQUN2Qiw2RUFBNkU7SUFDN0UsNkNBQTZDO0lBQzdDLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxFQUN6QyxDQUFDLEdBQUcsSUFBSSx1QkFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FDdkIsR0FBRyxFQUFFLENBQUMsVUFBVSxBQUFDO0lBRXJCLE1BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FDYixDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBR3RCLE9BQU8sQ0FBQyxDQUFDO0NBQ1YsQ0FBQztBQUVGLDBCQUFJLENBQUMsQ0FBQyxHQUFHLENBQUEsR0FBRyxHQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQywrQkFBK0I7QUFFN0UsMEJBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUs7SUFDaEIsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEVBQ3pDLENBQUMsR0FBRyxJQUFJLHVCQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUNyQixHQUFHLEVBQUUsQ0FBQyxVQUFVLEFBQUM7SUFFckIsTUFBTyxDQUFDLENBQUMsTUFBTSxDQUNiLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFHdEIsT0FBTyxDQUFDLENBQUM7Q0FDVixDQUFDO0lBRUYsa0NBQWtDO0FBQ2xDLHdDQUFvQixHQUFMLDBCQUFJIiwic291cmNlcyI6WyJzcmMvdmRvbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWRE9NIGlzIGFuIHVwZGF0ZWQgRVM2KyB2ZXJzaW9uIG9mIGEgVmlydHVhbCBET00gaW1wbGVtZW50YXRpb24gSSBidWlsdCBpblxuLy8gMjAwOCBiZWZvcmUgVmlydHVhbCBET00gZXZlbiBoYWQgYSBuYW1lIHlldC5cbi8vXG4vLyBUaGUgdGVybSDigJxWaXJ0dWFsIERPTeKAnSByZWZlcnMgdG8gcmVhbCBET00gbm9kZXMgdGhhdCBleGlzdCBpbiBtZW1vcnksIGJ1dCBhcmVcbi8vIG5vdCBhdHRhY2hlZCB0byB0aGUgX2xpdmVfIHRyZWUuIFRoaXMgbWVhbnMgdGhhdCB0aGV5IGNhbiBiZSBtb2RpZmllZCBhbmRcbi8vIG1hbmlwdWxhdGVkIGluLW1lbW9yeSB3aXRob3V0IHRyaWdnZXJpbmcgcmVwYWludHMgYW5kIHJlZmxvd3MgaW4gdGhlIGJyb3dzZXJcbi8vIGVuZ2luZSwgbWFraW5nIG1vZGlmaWNhdGlvbnMgZHJhbWF0aWNhbGx5IGZhc3Rlci5cbi8vXG4vLyBCeSBsZXZlcmFnaW5nIGBEb2N1bWVudEZyYWdtZW50YCBvYmplY3RzIHVuZGVyIHRoZSBob29kLCB3ZSBjYW4gY29sbGVjdCBvbmVcbi8vIG9yIG1vcmUgc2libGluZyBlbGVtZW50cyB0b2dldGhlciB3aGljaCBkbyBub3QgaGF2ZSBhIHNoYXJlZCBwYXJlbnQgbm9kZVxuLy8gdW50aWwgdGhleSBhcmUgaW5qZWN0ZWQgaW50byB0aGUgbGl2ZSBET00uIFRoaXMgaXMgZnVuZGFtZW50YWxseSB0aGUgc2FtZSB3YXlcbi8vIHRoYXQgYFJlYWN0LmNyZWF0ZUVsZW1lbnQoKWAgd29ya3MsIGFuZCB0aGUgc3ludGF4IGlzIHZlcnkgc2ltaWxhci5cbi8vXG4vLyAqKkV4YW1wbGVzOioqXG4vL1xuLy8gRnJvbSB0aGUgPGh0dHBzOi8vcmVhY3Rqcy5vcmc+IGhvbWVwYWdlLCB0aGlzIGV4YW1wbGUgZ2VuZXJhdGVzIGEgbmV3IERPTVxuLy8gZWxlbWVudCBhbmQgYXBwZW5kcyBpdCB0byB0aGUgbGl2ZSBET00uXG4vL1xuLy8gYGBgamF2YXNjcmlwdFxuLy8gY2xhc3MgSGVsbG9NZXNzYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbi8vICAgcmVuZGVyKCkge1xuLy8gICAgIHJldHVybiAoXG4vLyAgICAgICA8ZGl2PlxuLy8gICAgICAgICBIZWxsbyB7dGhpcy5wcm9wcy5uYW1lfVxuLy8gICAgICAgPC9kaXY+XG4vLyAgICAgKTtcbi8vICAgICAvLyBvci4uLlxuLy8gICAgIC8vIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuLy8gICAgIC8vICAgXCJkaXZcIixcbi8vICAgICAvLyAgIG51bGwsXG4vLyAgICAgLy8gICBcIkhlbGxvIFwiLFxuLy8gICAgIC8vICAgdGhpcy5wcm9wcy5uYW1lXG4vLyAgICAgLy8gKTtcbi8vICAgfVxuLy8gfVxuLy9cbi8vIFJlYWN0RE9NLnJlbmRlcihcbi8vICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbi8vICAgICBIZWxsb01lc3NhZ2UsIHsgbmFtZTogXCJUYXlsb3JcIiB9XG4vLyAgICksXG4vLyAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWxsby1leGFtcGxlJylcbi8vICk7XG4vLyBgYGBcbi8vXG4vLyBIZXJlJ3MgYSAocm91Z2hseSkgZXF1aXZhbGVudCBleGFtcGxlIHVzaW5nIFZET00sIGV4Y2VwdCB0aGF0IHRoZXJlIGFyZSBub1xuLy8gX21hZ2ljYWxfIGBwcm9wc2AgYmVjYXVzZSB0aGVyZSBhcmUgbm8gYGNvbXBvbmVudHNgLiBKdXN0IHN0YW5kYXJkIGZ1bmN0aW9uc1xuLy8gYW5kIHZhcmlhYmxlcy5cbi8vXG4vLyBgYGBqYXZhc2NyaXB0XG4vLyBjb25zdCBfID0gVkRPTSxcbi8vICAgICAgICQgPSBEUXVlcnk7XG4vL1xuLy8gZnVuY3Rpb24gSGVsbG9NZXNzYWdlKHByb3BzKSB7XG4vLyAgIHJldHVybiBgXG4vLyAgICAgPGRpdj5cbi8vICAgICAgIEhlbGxvICR7cHJvcHMubmFtZX1cbi8vICAgICA8L2Rpdj5cbi8vICAgYDtcbi8vICAgLy8gb3IuLi5cbi8vICAgLy8gcmV0dXJuIF8oJ2RpdicpLmgoYEhlbGxvICR7cHJvcHMubmFtZX1gKTtcbi8vIH1cbi8vXG4vLyAkKCcjaGVsbG8tZXhhbXBsZScpWzBdLmFwcGVuZChcbi8vICAgSGVsbG9NZXNzYWdlKHsgbmFtZTogXCJUYXlsb3JcIiB9KVxuLy8gKTtcbi8vIGBgYFxuLy9cbi8vIFZET00gc2l0cyBtdWNoIOKAnGNsb3NlciB0byB0aGUgbWV0YWzigJ0sIHdoaWNoIG1ha2VzIGl0IChhKSBmYXN0ZXIsIGFuZCAoYilcbi8vIHNtYWxsZXIuIFdoaWxlIGl0IGxhY2tzIHNvbWUgb2YgdGhlIG5pY2V0aWVzIGxpa2UgSlNYLCB5b3UgY2FuIHN0aWxsIHVzZVxuLy8gYGlubmVySFRNTGAgd2hpY2ggZ2V0cyB5b3UgX21vc3RfIG9mIHRoZSB3YXkgdGhlcmUgYXQgdmVyeSBsaXR0bGUgY29zdC5cbi8vXG4vLyAtLS0tXG5cbmNvbnN0IFggPSBmdW5jdGlvbihlbGVtLCBhdHRyKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXMsXG4gICAgICBSRV9JRF9PUl9DTEFTUyA9IC9bXFwuI10vdSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2VsZXNzLWVzY2FwZVxuICAgICAgUkVfQ1NTX0FUVFJTID0gL1xcWyhbXlxcXV0rKVxcXS9ndSxcbiAgICAgIEFSUl9ORVhUID0gMTtcblxuICAgIGxldCBrZXksIGssIG1hdGNoO1xuXG4gICAgYXR0ciA9IGF0dHIgfHwge307XG5cbiAgICAvLyBQYXJzZSB0aGUgQ1NTLXN0eWxlIG5vdGF0aW9uLlxuICAgIGZ1bmN0aW9uIG5vdGF0aW9uKCkge1xuICAgICAgY29uc3QgYXR0ID0ge1xuICAgICAgICAgIGNsYXNzOiBbXSxcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGt2UGFpciA9IFtdO1xuXG4gICAgICBpZiAoIVJFX0lEX09SX0NMQVNTLnRlc3QoZWxlbSkgJiYgIVJFX0NTU19BVFRSUy50ZXN0KGVsZW0pKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGVjdCBhbGwgb2YgdGhlIGBbaz12XWAgYmxvY2tzLlxuICAgICAgd2hpbGUgKChtYXRjaCA9IFJFX0NTU19BVFRSUy5leGVjKGVsZW0pKSAhPT0gbnVsbCkge1xuICAgICAgICBrdlBhaXIucHVzaChtYXRjaFsxXS5zcGxpdCgnPScpKTtcbiAgICAgIH1cblxuICAgICAgZWxlbSA9IGVsZW0ucmVwbGFjZShSRV9DU1NfQVRUUlMsICcnKTtcbiAgICAgIGNvbnN0IHBpZWNlcyA9IGVsZW0uc3BsaXQoUkVfSURfT1JfQ0xBU1MpLFxuICAgICAgICBlbGVtVHlwZSA9IHBpZWNlcy5zaGlmdCgpO1xuXG4gICAgICBrdlBhaXIuZm9yRWFjaCgodmFsLCBpZHgsIGFycikgPT4ge1xuICAgICAgICBhdHRbYXJyW2lkeF1bMF1dID0gYXJyW2lkeF1bMV07XG4gICAgICB9KTtcblxuICAgICAgLy8gU3VwcG9ydCBDU1MvalF1ZXJ5LXN0eWxlIG5vdGF0aW9uIGZvciBnZW5lcmF0aW5nIGVsZW1lbnRzIHdpdGggSURzIGFuZCBjbGFzc25hbWVzLlxuICAgICAgbGV0IHBvcyA9IGVsZW1UeXBlLmxlbmd0aDtcbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBhdHRbJ2NsYXNzJ107XG5cbiAgICAgIHBpZWNlcy5mb3JFYWNoKCh2YWwsIGlkeCwgYXJyKSA9PiB7XG4gICAgICAgIGlmIChlbGVtW3Bvc10gPT09ICcjJykge1xuICAgICAgICAgIGF0dC5pZCA9IHZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGFzc2VzLnB1c2godmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvcyArPSBhcnJbaWR4XS5sZW5ndGggKyBBUlJfTkVYVDtcbiAgICAgIH0pO1xuXG4gICAgICBhdHRbJ2NsYXNzJ10gPSBjbGFzc2VzO1xuICAgICAgaWYgKCFhdHRbJ2NsYXNzJ10ubGVuZ3RoKSB7XG4gICAgICAgIGRlbGV0ZSBhdHRbJ2NsYXNzJ107XG4gICAgICB9XG5cbiAgICAgIGlmIChhdHRbJ2lkJ10gPT09ICcnKSB7XG4gICAgICAgIGRlbGV0ZSBhdHRbJ2lkJ107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdHQ7XG4gICAgfVxuXG4gICAgLy8gTWVyZ2Ugb3B0aW9ucyBpbnRvIGEgY29uZ2xvbW8taGFzaCFcbiAgICBhdHRyID0gT2JqZWN0LmFzc2lnbihhdHRyLCBub3RhdGlvbigpKTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudCwgbG9vcCB0aHJvdWdoIHRoZSBsaXN0IG9mIGF0dHJpYnV0ZXMgYW5kIGFkZCB0aGVtIHRvIHRoZSBub2RlLlxuICAgIGlmIChSRV9JRF9PUl9DTEFTUy50ZXN0KGVsZW0pKSB7XG4gICAgICBzZWxmLmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW0uc3BsaXQoUkVfSURfT1JfQ0xBU1MpLnNoaWZ0KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW0pO1xuICAgIH1cblxuICAgIGlmIChhdHRyKSB7XG4gICAgICBmb3IgKGtleSBpbiBhdHRyKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXR0ciwga2V5KSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiBhdHRyW2tleV0gPT09ICdvYmplY3QnXG4gICAgICAgICAgJiYgdHlwZW9mIGF0dHJba2V5XS5sZW5ndGggPT09ICdudW1iZXInXG4gICAgICAgICAgJiYgdHlwZW9mIGF0dHJba2V5XS5zcGxpY2UgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGF0dHJba2V5XSA9IGF0dHJba2V5XS5qb2luKCcgJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICBzZWxmLmUuY2xhc3NOYW1lID0gYXR0cltrZXldO1xuXG4gICAgICAgICAgLy8gU3VwcG9ydCBgZGF0YToge31gIGZvciBkYXRhIGF0dHJpYnV0ZXNcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleS50b1N0cmluZygpID09PSAnZGF0YScpIHtcbiAgICAgICAgICAgIGZvciAoayBpbiBhdHRyW2tleV0pIHtcbiAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdHRyW2tleV0sIGspKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5lLnNldEF0dHJpYnV0ZShgZGF0YS0keyBrIH1gLCBhdHRyW2tleV1ba10pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjaGlsZCBub2Rlcy5cbiAgICBzZWxmLl8gPSAob2JqKSA9PiB7XG4gICAgLy8gSWYgdGhlIG9iamVjdCBpc24ndCBhbiBhcnJheSwgY29udmVydCBpdCB0byBhbiBhcnJheSB0byBtYWludGFpbiBhIHNpbmdsZSBjb2RlcGF0aCBiZWxvdy5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iaiA9IFtvYmpdO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIGluZGV4ZWQgYXJyYXkgb2YgY2hpbGRyZW4uIElmIHRoZSBub2RlIGlzIGEgYFZET01gIG9iamVjdCwgY29udmVydCBpdCB0b1xuICAgICAgLy8gRE9NIGFuZCBhcHBlbmQgaXQuIE90aGVyd2lzZSwgYXNzdW1lIGl0J3MgYSByZWFsIERPTSBub2RlLlxuICAgICAgZm9yIChsZXQgaSA9IDAsIG1heCA9IG9iai5sZW5ndGg7IGkgPCBtYXg7IGkgKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbaV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG9ialtpXS5kb20gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5lLmFwcGVuZENoaWxkKG9ialtpXS5kb20oKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5lLmFwcGVuZENoaWxkKG9ialtpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcblxuICAgIC8vIFNldCB0aGUgSFRNTFxuICAgIHNlbGYuaCA9IChzdHIsIHJlcGxhY2UpID0+IHtcbiAgICAvLyBEZXRlcm1pbmUgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIGByZXBsYWNlYC5cbiAgICAgIHJlcGxhY2UgPSByZXBsYWNlIHx8IGZhbHNlO1xuXG4gICAgICAvLyBTZXQgdGhlIHZhbHVlIHdpdGggaW5uZXJIVE1MLlxuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgc2VsZi5lLmlubmVySFRNTCA9IHN0cjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuZS5pbm5lckhUTUwgKz0gc3RyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9O1xuXG4gICAgLy8gU2V0IHRoZSB0ZXh0XG4gICAgc2VsZi50ID0gKHN0cikgPT4ge1xuICAgIC8vIE5vIHBhcmFtZXRlcnM/IFJlYWQgdGhlIHZhbHVlIGluc3RlYWQuIEFsaWFzIGZvciBfX3QoKS5cbiAgICAgIGlmICh0eXBlb2Ygc3RyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2VsZi5fX3QoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0cik7XG5cbiAgICAgIHNlbGYuZS5hcHBlbmRDaGlsZCh0ZXh0KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcblxuICAgIC8vIEdldCBET01FbGVtZW50XG4gICAgc2VsZi5kb20gPSAoKSA9PiBzZWxmLmU7XG5cbiAgICAvLyBHZXQgYXMgSFRNTFxuICAgIHNlbGYudG9TdHJpbmcgPSAoKSA9PiB7XG4gICAgICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgIHQuYXBwZW5kQ2hpbGQoc2VsZi5lKTtcblxuICAgICAgcmV0dXJuIHQuaW5uZXJIVE1MO1xuICAgIH07XG5cbiAgICAvLyBHZXQgYXMgdGV4dFxuICAgIHNlbGYuX190ID0gKCkgPT4ge1xuICAgICAgY29uc3QgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICB0LmFwcGVuZENoaWxkKHNlbGYuZSk7XG5cbiAgICAgIHJldHVybiB0LnRleHRDb250ZW50IHx8IHQuaW5uZXJUZXh0O1xuICAgIH07XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfSxcblxuICAvLyBQcmUtaW5zdGFudGlhdGUgdGhlIGNsYXNzIG9uIGVhY2ggY2FsbCBzbyB0aGF0IHlvdSBuZXZlciBuZWVkIHRvIHVzZSBgbmV3YC5cbiAgVkRPTSA9IChlbGVtLCBhdHRyKSA9PiBuZXcgWChlbGVtLCBhdHRyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5WRE9NLkRPTSA9ICguLi5ub2RlcykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG4gIC8vIENyZWF0ZSBhIGRvY3VtZW50IGZyYWdtZW50LiBHcmFiIGFuZCBsb29wIHRocm91Z2ggdGhlIGluLW1lbW9yeSBET00gbm9kZXMsXG4gIC8vIGFuZCBfbW92ZV8gdGhlbSB0byB0aGUgYERvY3VtZW50RnJhZ21lbnRgLlxuICBjb25zdCBmID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgIG4gPSBuZXcgWCgnZGl2JykuXyhub2RlcykuXG4gICAgICBkb20oKS5jaGlsZE5vZGVzO1xuXG4gIHdoaWxlIChuLmxlbmd0aCkge1xuICAgIGYuYXBwZW5kQ2hpbGQoblswXSk7XG4gIH1cblxuICByZXR1cm4gZjtcbn07XG5cblZET00udCA9IHN0ciA9PiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblZET00uaCA9IChzdHIpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICBjb25zdCBmID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgIG4gPSBuZXcgWCgnZGl2JykuaChzdHIpLlxuICAgICAgZG9tKCkuY2hpbGROb2RlcztcblxuICB3aGlsZSAobi5sZW5ndGgpIHtcbiAgICBmLmFwcGVuZENoaWxkKG5bMF0pO1xuICB9XG5cbiAgcmV0dXJuIGY7XG59O1xuXG4vLyBEZWZhdWx0IGV4cG9ydCBmb3IgdGhlIHBhY2thZ2UuXG5leHBvcnQgZGVmYXVsdCBWRE9NO1xuIl0sIm5hbWVzIjpbXSwidmVyc2lvbiI6MywiZmlsZSI6Ii4vZGlzdC92ZG9tLmpzLm1hcCJ9"],"names":[],"version":3,"file":"vdom.js.map","sourceRoot":"../"}